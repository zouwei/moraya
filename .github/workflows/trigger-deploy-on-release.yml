name: Trigger Cloudflare Deploy on Release

on:
  release:
    types: [published, created, released]  # 监听多个事件类型
  workflow_dispatch:  # 添加手动触发

jobs:
  trigger-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger Cloudflare Pages Deploy
        run: |
          curl -X POST "${{ secrets.CLOUDFLARE_DEPLOY_HOOK_URL }}"
      
      - name: Notify success
        run: |
          echo "✅ Cloudflare Pages deploy triggered for release ${{ github.event.release.tag_name }}"
          echo "Release URL: ${{ github.event.release.html_url }}"