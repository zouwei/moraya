# 005 â€” Phase 5: åˆ›ä½œå‘å¸ƒå·¥ä½œæµ + åŸºç¡€è®¾æ–½å¢å¼º (v0.2.0)

> è¿­ä»£ç‰ˆæœ¬: v0.2.0
> ä¸Šä¸€ç‰ˆæœ¬: v0.1.3 (Phase 4: ç¼–è¾‘å™¨å¢å¼º)
> åˆ›å»ºæ—¥æœŸ: 2026-02-05
> çŠ¶æ€: å·²å®Œæˆ

## ç‰ˆæœ¬æ¦‚è¦

v0.2.0 æ˜¯ Moraya ä»ã€ŒMarkdown ç¼–è¾‘å™¨ã€è¿›åŒ–ä¸ºã€Œåˆ›ä½œâ†’ä¼˜åŒ–â†’å‘å¸ƒã€ä¸€ç«™å¼å·¥å…·çš„å…³é”®ç‰ˆæœ¬ã€‚æœ¬ç‰ˆæœ¬æ–°å¢ **åˆ›ä½œå‘å¸ƒå·¥ä½œæµ**ï¼ˆSEO ä¼˜åŒ–ã€AI é…å›¾ã€å¤šç›®æ ‡å‘å¸ƒï¼‰ã€**å›¾ç‰‡å·¥å…·ç³»ç»Ÿ**ï¼ˆç¼©æ”¾ + å›¾åºŠï¼‰ã€**è‡ªåŠ¨å‡çº§æ£€æŸ¥** å’Œ **å¤šçª—å£æ”¯æŒ**ï¼Œå…± **50 ä¸ªæ–‡ä»¶å˜æ›´ã€6,831 è¡Œæ–°å¢ä»£ç **ã€‚

### å®‰è£…åŒ…å¤§å°

| å¹³å° | æ ¼å¼ | å¤§å° |
|------|------|------|
| macOS | DMG | ~5 MB |
| macOS | App Bundle | ~5 MB |

---

## åŠŸèƒ½æ¸…å•

| ç¼–å· | åŠŸèƒ½ | ç±»å‹ | ä¼˜å…ˆçº§ | çŠ¶æ€ |
|------|------|------|--------|------|
| F5.1 | SEO ä¼˜åŒ–åŠ©æ‰‹ | åˆ›ä½œå·¥ä½œæµ | P0 | âœ… |
| F5.2 | AIGC å›¾ç‰‡ç”Ÿæˆé…ç½® | åˆ›ä½œå·¥ä½œæµ | P0 | âœ… |
| F5.3 | AI é…å›¾å·¥ä½œæµ | åˆ›ä½œå·¥ä½œæµ | P0 | âœ… |
| F5.4 | å‘å¸ƒç›®æ ‡ç®¡ç† | åˆ›ä½œå·¥ä½œæµ | P1 | âœ… |
| F5.5 | å‘å¸ƒå·¥ä½œæµ UI | åˆ›ä½œå·¥ä½œæµ | P1 | âœ… |
| F5.6 | å›¾ç‰‡å·¥å…·ç³»ç»Ÿ | ç¼–è¾‘å™¨å¢å¼º | P1 | âœ… |
| F5.7 | å›¾åºŠæœåŠ¡ | ç¼–è¾‘å™¨å¢å¼º | P1 | âœ… |
| F5.8 | è‡ªåŠ¨å‡çº§æ£€æŸ¥ | åŸºç¡€è®¾æ–½ | P0 | âœ… |
| F5.9 | å¤šçª—å£ä¸ macOS Dock é›†æˆ | åŸºç¡€è®¾æ–½ | P1 | âœ… |

---

## F5.1 SEO ä¼˜åŒ–åŠ©æ‰‹

### éœ€æ±‚æè¿°

AI åˆ†ææ–‡ç« å†…å®¹ï¼ˆæˆªå–å‰ 8000 å­—ç¬¦ï¼‰ï¼Œè‡ªåŠ¨ç”Ÿæˆå‘å¸ƒæ‰€éœ€çš„ SEO å…ƒæ•°æ®ã€‚æ”¯æŒä¸­è‹±æ–‡åŒè¯­ã€‚

### è¾“å‡ºæ•°æ®ç»“æ„

```typescript
interface SEOData {
  titles: string[];           // 3 ä¸ª SEO ä¼˜åŒ–å€™é€‰æ ‡é¢˜ï¼ˆæ¯ä¸ª <70 å­—ç¬¦ï¼‰
  selectedTitle: string;      // ç”¨æˆ·é€‰ä¸­çš„æ ‡é¢˜ï¼ˆé»˜è®¤ç¬¬ä¸€ä¸ªï¼‰
  excerpt: string;            // æ‘˜è¦ï¼ˆâ‰¤120 å­—ç¬¦ï¼‰
  tags: string[];             // 5-8 ä¸ªå…³é”®è¯æ ‡ç­¾
  metaDescription: string;    // meta descriptionï¼ˆâ‰¤160 å­—ç¬¦ï¼‰
  slug: string;               // URL å‹å¥½çš„è‹±æ–‡çŸ­è·¯å¾„
}
```

### AI Prompt è¡Œä¸º

- ç”Ÿæˆ 3 ä¸ªå€™é€‰æ ‡é¢˜ï¼ˆä¿ç•™åŸæ–‡æ ¸å¿ƒå«ä¹‰ï¼ŒSEO å‹å¥½ï¼‰
- ä¸­æ–‡æ–‡ç« ç”Ÿæˆä¸­æ–‡æ ‡é¢˜ï¼Œä½† slug å§‹ç»ˆä¸ºè‹±æ–‡
- å¼ºåˆ¶ JSON å“åº”æ ¼å¼ï¼ˆæ—  markdown åŒ…è£¹ï¼‰

### æ•°æ®å­˜å‚¨

- **å­˜å‚¨ä½ç½®**: Tauri plugin-storeï¼Œkey ä¸º `seo:{filePath}`
- **é›¶æ–‡ä»¶æ±¡æŸ“**: ä¸åœ¨ç”¨æˆ·å·¥ä½œç›®å½•ç”Ÿæˆä»»ä½•æ–‡ä»¶
- **å‘å¸ƒæ—¶åˆå¹¶**: å¯¼å‡º/å‘å¸ƒæ—¶è‡ªåŠ¨æ‹¼è£…ä¸º front matter

### UI äº¤äº’

- **å…¥å£**: åˆ›ä½œå·¥ä½œæµé¢æ¿ä¸­çš„æ­¥éª¤é¡¹
- **é¢æ¿å½¢å¼**: åº•éƒ¨æŠ½å±‰ï¼ˆBottom Sheetï¼‰ï¼Œä» StatusBar ä¸Šæ–¹å¼¹å‡º
- **å¸ƒå±€**: ç¼–è¾‘åŒºä¸ŠåŠéƒ¨åˆ†ä»å¯è§ï¼Œç”¨æˆ·å¯å¯¹ç…§ä¿®æ”¹
- **å†…å®¹**: æ ‡é¢˜å€™é€‰ radio å•é€‰ + æ‘˜è¦ textarea + æ ‡ç­¾ chips + Slug è¾“å…¥ + æ“ä½œæ 

### æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | ç±»å‹ | è¡Œæ•° | è¯´æ˜ |
|------|------|------|------|
| `src/lib/components/SEOPanel.svelte` | æ–°å»º | 474 | åº•éƒ¨æŠ½å±‰é¢æ¿ UI |
| `src/lib/services/ai/seo-service.ts` | æ–°å»º | 63 | SEO åˆ†æé€»è¾‘ï¼ˆè°ƒç”¨å·²æœ‰ AI serviceï¼‰ |
| `src/lib/services/ai/types.ts` | ä¿®æ”¹ | â€” | æ–°å¢ SEOData æ¥å£ |

---

## F5.2 AIGC å›¾ç‰‡ç”Ÿæˆé…ç½®

### éœ€æ±‚æè¿°

åœ¨è®¾ç½®é¢æ¿ AI æ ‡ç­¾é¡µä¸­æ–°å¢ã€Œå›¾ç‰‡ç”Ÿæˆ AIã€é…ç½®åŒºå—ã€‚æ”¯æŒæ¯”ä¾‹ + åˆ†è¾¨ç‡æ¡£ä½çš„çµæ´»å°ºå¯¸ç³»ç»Ÿã€‚

### æ”¯æŒçš„ Provider

| Provider | Base URL | é»˜è®¤æ¨¡å‹ | è¯´æ˜ |
|----------|----------|----------|------|
| OpenAI DALL-E | `https://api.openai.com/v1` | `dall-e-3` | æ ‡å‡†å®ç° |
| Grok (xAI) | `https://api.x.ai/v1` | `grok-2-image` | OpenAI å…¼å®¹æ ¼å¼ |
| Custom | ç”¨æˆ·è‡ªå¡« | ç”¨æˆ·è‡ªå¡« | é€‚é…é˜¿é‡Œäº‘é€šä¹‰ä¸‡ç›¸ç­‰ï¼ˆè‡ªåŠ¨è¯†åˆ« DashScopeï¼‰ |

### ç»Ÿä¸€æ¥å£

ä¸‰ä¸ª Provider å…±äº« OpenAI-compatible åè®®ï¼ˆ`/images/generations`ï¼‰ï¼Œå·®å¼‚ä»…åœ¨é¢„å¡«é…ç½®å€¼ã€‚å½“æ£€æµ‹åˆ° DashScope URL æ—¶ï¼Œè‡ªåŠ¨åˆ‡æ¢ä¸ºé˜¿é‡Œäº‘åŸç”Ÿå¤šæ¨¡æ€ APIã€‚

```typescript
type ImageProvider = 'openai' | 'grok' | 'custom';
type ImageAspectRatio = '16:9' | '4:3' | '3:2' | '1:1' | '2:3' | '3:4' | '9:16';
type ImageSizeLevel = 'large' | 'medium' | 'small';

interface ImageProviderConfig {
  provider: ImageProvider;
  baseURL: string;
  apiKey: string;
  model: string;
  defaultRatio: ImageAspectRatio;       // é»˜è®¤ '16:9'
  defaultSizeLevel: ImageSizeLevel;     // é»˜è®¤ 'medium'
}
```

### å›¾ç‰‡å°ºå¯¸çŸ©é˜µ

7 ç§æ¯”ä¾‹ Ã— 3 ç§åˆ†è¾¨ç‡æ¡£ä½ = 21 ç§é¢„è®¾å°ºå¯¸ï¼š

| æ¯”ä¾‹ | Large | Medium | Small |
|------|-------|--------|-------|
| 16:9 | 1792Ã—1008 | 1280Ã—720 | 1024Ã—576 |
| 4:3 | 1536Ã—1152 | 1280Ã—960 | 1024Ã—768 |
| 3:2 | 1536Ã—1024 | 1280Ã—854 | 1024Ã—682 |
| 1:1 | 1536Ã—1536 | 1024Ã—1024 | 768Ã—768 |
| 2:3 | 1024Ã—1536 | 854Ã—1280 | 682Ã—1024 |
| 3:4 | 1152Ã—1536 | 960Ã—1280 | 768Ã—1024 |
| 9:16 | 1008Ã—1792 | 720Ã—1280 | 576Ã—1024 |

### DashScope é€‚é…

- è‡ªåŠ¨æ£€æµ‹ baseURL ä¸­çš„ `dashscope` å…³é”®å­—
- åˆ‡æ¢ä¸ºåŸç”Ÿ `/api/v1/services/aigc/multimodal-generation/generation` API
- è¿æ¥æµ‹è¯•ä½¿ç”¨åŸç”Ÿ API POSTï¼ˆå…¼å®¹æ¨¡å¼ /models è¿”å› 503ï¼‰
- å°ºå¯¸æ ¼å¼ä» `1024x1024` è½¬æ¢ä¸º `1024*1024`
- ä½¿ç”¨ Tauri HTTP æ’ä»¶ç»•è¿‡ CORS

### æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | ç±»å‹ | è¡Œæ•° | è¯´æ˜ |
|------|------|------|------|
| `src/lib/services/ai/image-service.ts` | æ–°å»º | 290 | å›¾ç‰‡ç”Ÿæˆ API è°ƒç”¨ï¼ˆå« DashScope é€‚é…å™¨ï¼‰ |
| `src/lib/services/ai/types.ts` | ä¿®æ”¹ | â€” | æ–°å¢ ImageProviderConfigã€IMAGE_SIZE_MAP |
| `src/lib/components/ai/AISettings.svelte` | ä¿®æ”¹ | â€” | æ–°å¢å›¾ç‰‡ç”Ÿæˆ AI é…ç½®åŒºå— |
| `src/lib/stores/settings-store.ts` | ä¿®æ”¹ | â€” | æ–°å¢ imageProviderConfig é…ç½®å­˜å‚¨ |

---

## F5.3 AI é…å›¾å·¥ä½œæµ

### éœ€æ±‚æè¿°

åŸºäºæ–‡ç« å†…å®¹ï¼ŒAI ç”Ÿæˆå›¾ç‰‡æç¤ºè¯ï¼Œå†è°ƒç”¨ AIGC API ç”Ÿæˆé…å›¾ï¼Œæ’å…¥æ–‡ç« ã€‚æ”¯æŒ 5 ç§ç”Ÿå›¾æ¨¡å¼ï¼Œæ¯ç§æ¨¡å¼ 10 ç§ä¸“ä¸šå›¾ç‰‡é£æ ¼ã€‚

### äº”ç§ç”Ÿå›¾æ¨¡å¼

| æ¨¡å¼ | è¯´æ˜ | å…¸å‹åœºæ™¯ |
|------|------|----------|
| Articleï¼ˆæ–‡ç« é…å›¾ï¼‰ | å›¾æ–‡å¹¶èŒ‚çš„æ–‡ç« æ’å›¾ | åšå®¢ã€æŠ€æœ¯æ–‡æ¡£ |
| Designï¼ˆè®¾è®¡å¯è§†åŒ–ï¼‰ | å¤šè§’åº¦äº§å“/å·¥ä¸šè®¾è®¡æ¸²æŸ“ | äº§å“å±•ç¤ºã€æ¦‚å¿µè®¾è®¡ |
| Storyboardï¼ˆæ•…äº‹æ¿ï¼‰ | æŒ‰æ—¶é—´çº¿çš„å™äº‹åœºæ™¯å¸§ | è„šæœ¬ã€æ•™ç¨‹ã€æµç¨‹è¯´æ˜ |
| Productï¼ˆäº§å“æ‘„å½±ï¼‰ | å•†ä¸šçº§äº§å“ç…§ç‰‡ | ç”µå•†ã€äº§å“é¡µ |
| Moodboardï¼ˆæƒ…ç»ªæ¿ï¼‰ | æŠ½è±¡/æ°›å›´ç±»çµæ„Ÿå›¾ | å“ç‰Œã€åˆ›æ„æ–¹æ¡ˆ |

### æ¨¡å¼ä¸“å±å›¾ç‰‡é£æ ¼ï¼ˆæ¯ç§ 10 ä¸ªï¼‰

```typescript
type ImageGenMode = 'article' | 'design' | 'storyboard' | 'product' | 'moodboard';

const MODE_STYLES: Record<ImageGenMode, ImageStyle[]> = {
  article:    ['auto', 'photo', 'illustration', 'flat', 'ink', 'watercolor', 'isometric', 'infographic', 'editorial', 'cartoon'],
  design:     ['auto', 'render', 'sketch', 'blueprint', 'clay', 'wireframe', 'exploded', 'section', 'cad', 'prototype'],
  storyboard: ['auto', 'anime', 'comic', 'cinematic', 'watercolor', 'pixel', 'noir', 'manga', 'cartoon', 'realistic'],
  product:    ['auto', 'studio', 'lifestyle', 'flatlay', 'macro', 'minimalist', 'packaging', 'outdoor', 'editorial', 'mood'],
  moodboard:  ['auto', 'abstract', 'texture', 'gradient', 'collage', 'vintage', 'botanical', 'geometric', 'ethereal', 'brutalist'],
};
```

### ä¸‰æ­¥æµç¨‹

#### Step 1: ç”Ÿæˆæç¤ºè¯

- æ–‡æœ¬ AI åˆ†ææ–‡ç«  â†’ è¾“å‡º N æ¡å›¾ç‰‡æç¤ºè¯ï¼ˆJSON æ ¼å¼ï¼‰
- æ¯æ¡æç¤ºè¯åŒ…å«ï¼š`prompt`ï¼ˆè‹±æ–‡ï¼‰ã€`target`ï¼ˆç›®æ ‡æ®µè½ç´¢å¼•ï¼‰ã€`reason`ï¼ˆå¯¹åº”æ®µè½è¯´æ˜ï¼‰
- å¯é…ç½®ï¼šç”Ÿå›¾æ¨¡å¼ï¼ˆ5 ç§ï¼‰ã€å›¾ç‰‡é£æ ¼ï¼ˆ10 ç§/æ¨¡å¼ï¼‰ã€æ¯”ä¾‹ï¼ˆ7 ç§ï¼‰ã€åˆ†è¾¨ç‡ï¼ˆ3 æ¡£ï¼‰ã€å¼ æ•°ï¼ˆ1-10ï¼Œé»˜è®¤ 5ï¼‰
- æç¤ºè¯å¯ç¼–è¾‘ã€å¯åˆ é™¤ã€å¯æ·»åŠ ã€å¯é‡æ–°ç”Ÿæˆ

#### Step 2: ç”Ÿæˆå›¾ç‰‡

- è°ƒç”¨ AIGC API é€å¼ ç”Ÿæˆï¼Œæ˜¾ç¤º loading çŠ¶æ€
- å›¾ç‰‡é¢„è§ˆæ¯”ä¾‹è‡ªé€‚åº”ï¼ˆæ ¹æ® Step 1 é€‰æ‹©çš„æ¯”ä¾‹è‡ªåŠ¨è°ƒæ•´ aspect-ratioï¼‰
- æ¯å¼ å›¾ä¸‹æ–¹ï¼šâ†» é‡æ–°ç”Ÿæˆ | âœ“ é€‰ä¸­/å–æ¶ˆ
- Grid å¸ƒå±€ï¼š`repeat(auto-fill, minmax(200px, 1fr))`

#### Step 3: æ’å…¥æ–‡ç« 

- **æ’å…¥ä½ç½®**ï¼ˆ3 ç§é€‰é¡¹ï¼‰:
  1. æ¯å¼ å›¾æ’å…¥å¯¹åº”æ®µè½åï¼ˆæ¨èï¼‰â€” æ™ºèƒ½è·³è¿‡ä»£ç å—
  2. æ–‡ç« æœ«å°¾
  3. ä»…å¤åˆ¶ Markdown åˆ°å‰ªè´´æ¿
- **ä»£ç å—ä¿æŠ¤**: æ£€æµ‹ fenced code block è¾¹ç•Œï¼Œè‹¥ç›®æ ‡æ®µè½åœ¨ä»£ç å—å†…éƒ¨ï¼Œè‡ªåŠ¨å»¶è¿Ÿåˆ°ä»£ç å—ç»“æŸåæ’å…¥
- ç¡®è®¤åæ’å…¥ `<img>` æ ‡ç­¾åˆ°ç¼–è¾‘å™¨ï¼Œæµ®å±‚å…³é—­

### UI äº¤äº’

- **é¢æ¿å½¢å¼**: å±…ä¸­æµ®å±‚ï¼ˆOverlay Dialogï¼‰ï¼Œ860Ã—720px
- **æ­¥éª¤æŒ‡ç¤ºå™¨**: `Step 1 â— â”€â”€ Step 2 â—‹ â”€â”€ Step 3 â—‹`

### æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | ç±»å‹ | è¡Œæ•° | è¯´æ˜ |
|------|------|------|------|
| `src/lib/components/ImageGenDialog.svelte` | æ–°å»º | 841 | é…å›¾ä¸‰æ­¥å‘å¯¼æµ®å±‚ï¼ˆå«æ¨¡å¼/é£æ ¼/æ¯”ä¾‹/å¼ æ•°æ§åˆ¶ï¼‰ |
| `src/lib/services/ai/image-service.ts` | ä¿®æ”¹ | â€” | 5 ç§æ¨¡å¼ system prompt + MODE_STYLES + æç¤ºè¯ç”Ÿæˆ |

---

## F5.4 å‘å¸ƒç›®æ ‡ç®¡ç†

### éœ€æ±‚æè¿°

Settings ä¸­æ–°å¢ Publish æ ‡ç­¾é¡µï¼Œæ”¯æŒæ·»åŠ **å¤šä¸ª**å‘å¸ƒç›®æ ‡ï¼ˆå¤šä¸ª GitHub ä»“åº“ + å¤šä¸ªè‡ªå®šä¹‰ APIï¼‰ã€‚

### ç›®æ ‡ç±»å‹

#### GitHub ä»“åº“

```typescript
interface GitHubTarget {
  type: 'github';
  id: string;
  name: string;
  repoUrl: string;             // https://github.com/user/blog
  branch: string;              // main
  articlesDir: string;         // content/posts/
  imagesDir: string;           // static/images/
  token: string;               // GitHub PAT
  frontMatterPreset: string;   // 'hugo' | 'hexo' | 'astro' | 'custom'
  frontMatterTemplate: string; // æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆæ”¯æŒ {{å˜é‡}}ï¼‰
  fileNamePattern: string;     // æ–‡ä»¶å‘½åè§„åˆ™
}
```

#### Custom API

```typescript
interface CustomAPITarget {
  type: 'custom-api';
  id: string;
  name: string;
  endpoint: string;
  method: 'POST' | 'PUT';
  headers: Record<string, string>;
  bodyTemplate: string;
  fileNamePattern: string;
}
```

### æ¨¡æ¿å˜é‡

```
{{title}}        â€” SEO æ ‡é¢˜ï¼ˆæˆ–æ–‡ç« ä¸€çº§æ ‡é¢˜ï¼‰
{{date}}         â€” å‘å¸ƒæ—¥æœŸ YYYY-MM-DD
{{tags}}         â€” æ ‡ç­¾ï¼ˆé€—å·åˆ†éš”ï¼‰
{{description}}  â€” meta description
{{slug}}         â€” URL slug
{{cover}}        â€” å°é¢å›¾è·¯å¾„/URL
{{excerpt}}      â€” æ‘˜è¦
{{content}}      â€” æ–‡ç« æ­£æ–‡ï¼ˆMarkdownï¼‰
```

### æ–‡ä»¶å‘½åè§„åˆ™

4 ç§é¢„è®¾ + è‡ªå®šä¹‰ï¼š

| é¢„è®¾ | æ¨¡å¼ | è¾“å‡ºç¤ºä¾‹ |
|------|------|----------|
| æ—¥æœŸ + Slugï¼ˆé»˜è®¤ï¼‰ | `{{date}}-{{slug}}` | `2026-02-05-my-article.md` |
| ç®€å•ï¼ˆåŸæ–‡ä»¶åï¼‰ | `{{filename}}` | `my-article.md` |
| æ—¥æœŸ + æ–‡ä»¶å | `{{date}}-{{filename}}` | `2026-02-05-my-article.md` |
| å¹´/æœˆ/Slug ç›®å½• | `{{year}}/{{month}}/{{slug}}` | `2026/02/my-article.md` |

### æŠ€æœ¯å®ç°

- GitHub å‘å¸ƒä½¿ç”¨ **GitHub Contents API**ï¼ˆ`PUT /repos/{owner}/{repo}/contents/{path}`ï¼‰ï¼Œæ— éœ€ git clone
- Custom API ä½¿ç”¨ `fetch()` ç›´æ¥ POST/PUT
- Front Matter é¢„è®¾ï¼šHugo / Hexo / Astro + è‡ªå®šä¹‰

### æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | ç±»å‹ | è¡Œæ•° | è¯´æ˜ |
|------|------|------|------|
| `src/lib/components/PublishSettings.svelte` | æ–°å»º | 616 | å‘å¸ƒç›®æ ‡é…ç½®é¢æ¿ |
| `src/lib/services/publish/types.ts` | æ–°å»º | 183 | ç±»å‹å®šä¹‰ + FILE_NAME_PRESETS + resolveFileName |
| `src/lib/services/publish/github-publisher.ts` | æ–°å»º | 163 | GitHub Contents API å‘å¸ƒé€»è¾‘ |
| `src/lib/services/publish/api-publisher.ts` | æ–°å»º | 65 | Custom API å‘å¸ƒé€»è¾‘ |
| `src/lib/services/publish/index.ts` | æ–°å»º | 14 | æ¨¡å—å¯¼å‡º |
| `src/lib/stores/settings-store.ts` | ä¿®æ”¹ | â€” | æ–°å¢ publishTargets é…ç½® |

---

## F5.5 å‘å¸ƒå·¥ä½œæµ UI

### éœ€æ±‚æè¿°

StatusBar æ–°å¢ã€Œåˆ›ä½œå·¥ä½œæµã€æŒ‰é’®ï¼Œç‚¹å‡»å¼¹å‡ºä¸Šæ‹‰é¢æ¿ï¼Œèšåˆ SEO â†’ é…å›¾ â†’ å‘å¸ƒä¸‰ä¸ªæ­¥éª¤ã€‚

### StatusBar å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  512 å­— Â· 2,847 å­—ç¬¦  â”‚  å¯è§†åŒ– â”‚ æºç  â”‚ åˆ†å± â”‚  ğŸ“¤ åˆ›ä½œå·¥ä½œæµ  â”‚ â¬†ï¸ â”‚ Markdown â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                  â†‘ å‡çº§æŒ‡ç¤ºå™¨ï¼ˆæœ‰æ–°ç‰ˆæ—¶æ˜¾ç¤ºï¼‰
```

### ä¸Šæ‹‰é¢æ¿

ä» StatusBar ä¸Šæ–¹å¼¹å‡ºï¼ˆfixed å®šä½ï¼Œ300px å®½ï¼Œå³ä¸‹è§’å¯¹é½ï¼‰ï¼Œslide-up åŠ¨ç”»ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åˆ›ä½œå·¥ä½œæµ              âœ•  â”‚
â”‚                             â”‚
â”‚  â˜  âœ¦ SEO ä¼˜åŒ–              â”‚
â”‚     ç”Ÿæˆæ ‡é¢˜/æ‘˜è¦/æ ‡ç­¾        â”‚
â”‚                             â”‚
â”‚  â˜  ğŸ¨ AI é…å›¾              â”‚
â”‚     ç”Ÿæˆæ–‡ç« é…å›¾              â”‚
â”‚                             â”‚
â”‚  â”€â”€ ä»¥ä¸Šæ­¥éª¤å¯é€‰ â”€â”€          â”‚
â”‚                             â”‚
â”‚  â—‹  ğŸ“¤ å‘å¸ƒ                  â”‚
â”‚     æ¨é€åˆ°ç›®æ ‡å¹³å°            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### äº¤äº’æµç¨‹

1. ç‚¹å‡»ã€Œâœ¦ SEOã€â†’ å·¥ä½œæµé¢æ¿å…³é—­ â†’ å¼¹å‡ºåº•éƒ¨æŠ½å±‰ â†’ å®ŒæˆåçŠ¶æ€å˜ â˜‘
2. ç‚¹å‡»ã€ŒğŸ¨ é…å›¾ã€â†’ å·¥ä½œæµé¢æ¿å…³é—­ â†’ å¼¹å‡ºå±…ä¸­æµ®å±‚ â†’ å®ŒæˆåçŠ¶æ€å˜ â˜‘
3. ç‚¹å‡»ã€ŒğŸ“¤ å‘å¸ƒã€â†’ å·¥ä½œæµé¢æ¿å…³é—­ â†’ å¼¹å‡ºç›®æ ‡é€‰æ‹©ï¼ˆæ”¯æŒ**å¤šé€‰**åŒæ—¶å‘å¸ƒï¼‰â†’ ç¡®è®¤å‘å¸ƒ
4. SEO å’Œé…å›¾**å¯é€‰å¯è·³è¿‡**ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥ç‚¹å‘å¸ƒ
5. åˆ‡æ¢æ–‡æ¡£æ—¶è‡ªåŠ¨é‡ç½®å·¥ä½œæµçŠ¶æ€

### æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | ç±»å‹ | è¡Œæ•° | è¯´æ˜ |
|------|------|------|------|
| `src/lib/components/PublishWorkflow.svelte` | æ–°å»º | 183 | ä¸Šæ‹‰å·¥ä½œæµé¢æ¿ |
| `src/lib/components/PublishConfirm.svelte` | æ–°å»º | 232 | å‘å¸ƒç¡®è®¤æµ®å±‚ï¼ˆç›®æ ‡é€‰æ‹© + å‘å¸ƒæ‰§è¡Œï¼‰ |
| `src/lib/components/StatusBar.svelte` | ä¿®æ”¹ | â€” | æ–°å¢åˆ›ä½œå·¥ä½œæµæŒ‰é’® + å‡çº§æŒ‡ç¤ºå™¨ |
| `src/routes/+page.svelte` | ä¿®æ”¹ | â€” | å·¥ä½œæµçŠ¶æ€ç®¡ç† |

---

## F5.6 å›¾ç‰‡å·¥å…·ç³»ç»Ÿ

### éœ€æ±‚æè¿°

å›¾ç‰‡æ’å…¥åæ”¯æŒä¸¤ç§äº¤äº’ï¼š**å•å‡»**æ˜¾ç¤ºæµ®åŠ¨ç¼©æ”¾å·¥å…·æ¡ï¼Œ**å³é”®**æ˜¾ç¤ºå®Œæ•´ä¸Šä¸‹æ–‡èœå•ã€‚

### æµ®åŠ¨ç¼©æ”¾å·¥å…·æ¡ï¼ˆå•å‡»å›¾ç‰‡ï¼‰

- å›¾ç‰‡ä¸Šæ–¹å‡ºç°æ°´å¹³å·¥å…·æ¡
- é¢„è®¾ï¼š`[25%] [50%] [75%] [100%] [åŸå§‹å¤§å°]`
- å½“å‰å°ºå¯¸é«˜äº®ï¼ˆaccent è‰²ï¼‰
- ç‚¹å‡»å…¶ä»–åŒºåŸŸ â†’ å·¥å…·æ¡æ¶ˆå¤±

### å³é”®ä¸Šä¸‹æ–‡èœå•

- **è°ƒæ•´å¤§å°** â†’ å­èœå•ï¼ˆ25% / 50% / 75% / 100% / åŸå§‹å¤§å°ï¼‰
- **ä¸Šä¼ åˆ°å›¾åºŠ**ï¼ˆä»…æœ¬åœ°/blob å›¾ç‰‡æ˜¾ç¤ºï¼‰
- **ç¼–è¾‘æè¿°**
- **å¤åˆ¶å›¾ç‰‡åœ°å€**
- â”€â”€ åˆ†éš”çº¿ â”€â”€
- **åˆ é™¤å›¾ç‰‡**ï¼ˆçº¢è‰²å±é™©æ“ä½œï¼‰

### æŠ€æœ¯å®ç°

- ProseMirror äº‹ä»¶ç›‘å¬å¤„ç†å›¾ç‰‡å•å‡»/å³é”®
- å›¾ç‰‡ `width` é€šè¿‡ `<img src="..." width="75%">` æ ¼å¼è¾“å‡ºåˆ° Markdown
- å·¥å…·æ¡å’Œèœå•å‡ä¸ºç‹¬ç«‹ Svelte ç»„ä»¶ï¼Œfixed å®šä½

### æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | ç±»å‹ | è¡Œæ•° | è¯´æ˜ |
|------|------|------|------|
| `src/lib/editor/ImageToolbar.svelte` | æ–°å»º | 95 | æµ®åŠ¨ç¼©æ”¾å·¥å…·æ¡ |
| `src/lib/editor/ImageContextMenu.svelte` | æ–°å»º | 161 | å³é”®ä¸Šä¸‹æ–‡èœå•ï¼ˆå«å­èœå•ï¼‰ |
| `src/lib/editor/Editor.svelte` | ä¿®æ”¹ | â€” | å›¾ç‰‡äº¤äº’äº‹ä»¶å¤„ç† |
| `src/lib/styles/editor.css` | ä¿®æ”¹ | â€” | å›¾ç‰‡ç¼©æ”¾ç›¸å…³æ ·å¼ |

---

## F5.7 å›¾åºŠæœåŠ¡

### éœ€æ±‚æè¿°

Settings ä¸­æ–°å¢ã€Œå›¾ç‰‡ã€æ ‡ç­¾é¡µï¼Œæ”¯æŒé…ç½®å›¾åºŠæœåŠ¡ã€‚å¯å°†æ–‡ç« ä¸­çš„å›¾ç‰‡ä¸Šä¼ åˆ°å›¾åºŠè·å–æ°¸ä¹… URLã€‚

### æ”¯æŒçš„å›¾åºŠ

| Provider | API åœ°å€ | è®¤è¯æ–¹å¼ |
|----------|----------|----------|
| SM.MS | `https://sm.ms/api/v2/upload` | Bearer Token |
| Imgur | `https://api.imgur.com/3/image` | Client-ID Header |
| GitHub | GitHub Contents API | Bearer Token |
| Custom | ç”¨æˆ·è‡ªå¡« | Bearer Token + è‡ªå®šä¹‰ Headers |

### é…ç½®æ•°æ®ç»“æ„

```typescript
type ImageHostProvider = 'smms' | 'imgur' | 'github' | 'custom';

interface ImageHostConfig {
  provider: ImageHostProvider;
  apiToken: string;
  customEndpoint: string;
  customHeaders: string;        // JSON å­—ç¬¦ä¸²
  autoUpload: boolean;          // ç²˜è´´/æ‹–å…¥å›¾ç‰‡æ—¶è‡ªåŠ¨ä¸Šä¼ 
  // GitHub å›¾åºŠç‰¹æœ‰å­—æ®µ
  githubRepoUrl: string;
  githubBranch: string;
  githubDir: string;
  githubToken: string;
  githubCdn: 'raw' | 'jsdelivr';
}
```

### åŠŸèƒ½

- **æ‰‹åŠ¨ä¸Šä¼ **: é€šè¿‡å›¾ç‰‡å³é”®èœå•ã€Œä¸Šä¼ åˆ°å›¾åºŠã€è§¦å‘
- **è‡ªåŠ¨ä¸Šä¼ **: å¼€å¯ autoUpload åï¼Œç²˜è´´/æ‹–å…¥å›¾ç‰‡æ—¶è‡ªåŠ¨ä¸Šä¼ 
- **æµ‹è¯•ä¸Šä¼ **: ç”Ÿæˆ 1Ã—1 çº¢è‰²åƒç´  PNG æµ‹è¯•è¿æ¥
- **å¯¼å…¥å‘å¸ƒç›®æ ‡**: GitHub å›¾åºŠå¯ä¸€é”®å¯¼å…¥å·²é…ç½®çš„å‘å¸ƒç›®æ ‡ä¿¡æ¯

### æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | ç±»å‹ | è¡Œæ•° | è¯´æ˜ |
|------|------|------|------|
| `src/lib/components/ImageHostingSettings.svelte` | æ–°å»º | 424 | å›¾åºŠé…ç½®é¢æ¿ |
| `src/lib/services/image-hosting/types.ts` | æ–°å»º | â€” | å›¾åºŠç±»å‹å®šä¹‰ |
| `src/lib/services/image-hosting/providers.ts` | æ–°å»º | â€” | SM.MS / Imgur / GitHub / Custom ä¸Šä¼ é€»è¾‘ |
| `src/lib/services/image-hosting/index.ts` | æ–°å»º | â€” | æ¨¡å—å¯¼å‡º |
| `src/lib/stores/settings-store.ts` | ä¿®æ”¹ | â€” | æ–°å¢ imageHostConfig é…ç½® |

---

## F5.8 è‡ªåŠ¨å‡çº§æ£€æŸ¥

### éœ€æ±‚æè¿°

æ¯æ—¥é¦–æ¬¡æ‰“å¼€ Moraya æ—¶é™é»˜æ£€æŸ¥ GitHub æœ€æ–°ç‰ˆæœ¬ï¼Œè‹¥æœ‰æ–°ç‰ˆæœ¬åˆ™åœ¨ StatusBar æ˜¾ç¤ºå‡çº§æŒ‡ç¤ºå™¨ â¬†ï¸ï¼Œç”¨æˆ·å¯é€šè¿‡ç‚¹å‡»æŒ‡ç¤ºå™¨æˆ–èœå•ã€Œç‰ˆæœ¬ä¿¡æ¯ã€æ‰“å¼€å‡çº§å¼¹çª—ï¼Œä¸€é”®ä¸‹è½½å®‰è£…ã€‚

### æ¶æ„

**å‰ç«¯é©±åŠ¨ + æœ€å° Rust æ”¹åŠ¨**ï¼š
- Rust ä»…æä¾› 2 ä¸ªå‘½ä»¤ï¼š`get_platform_info`ï¼ˆè¿”å› OS + archï¼‰ã€`exit_app`ï¼ˆé€€å‡ºåº”ç”¨ï¼‰
- å‰ç«¯è´Ÿè´£ GitHub API è°ƒç”¨ã€ç‰ˆæœ¬æ¯”è¾ƒã€ä¸‹è½½ã€å®‰è£…è§¦å‘
- åˆ©ç”¨ç°æœ‰ plugin-fs / plugin-opener / plugin-store

### å‡çº§æµç¨‹

```
å¯åŠ¨ â†’ è¯»å– lastUpdateCheckDate â†’ ä»Šæ—¥é¦–æ¬¡ï¼Ÿ
  â†’ æ˜¯ â†’ é™é»˜è°ƒç”¨ GitHub Releases API â†’ æ¯”è¾ƒ semver
    â†’ æœ‰æ–°ç‰ˆ â†’ updateStore.checkStatus = 'available' â†’ StatusBar æ˜¾ç¤º â¬†ï¸
    â†’ æœ€æ–°ç‰ˆ â†’ é™é»˜ï¼Œä¸æ‰“æ‰°ç”¨æˆ·
  â†’ å¦ â†’ è·³è¿‡
```

### UpdateDialog å¼¹çª—

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç‰ˆæœ¬ä¿¡æ¯                    âœ•  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  å½“å‰ç‰ˆæœ¬    v0.1.3             â”‚
â”‚  æœ€æ–°ç‰ˆæœ¬    v0.2.0  âœ¨         â”‚
â”‚                                 â”‚
â”‚  â”€â”€ æ›´æ–°å†…å®¹ â”€â”€                 â”‚
â”‚  â€¢ æ–°å¢åˆ›ä½œå‘å¸ƒå·¥ä½œæµ           â”‚
â”‚  â€¢ æ–°å¢è‡ªåŠ¨å‡çº§æ£€æŸ¥             â”‚
â”‚                                 â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• 80%            â”‚  â† ä¸‹è½½è¿›åº¦æ¡
â”‚                                 â”‚
â”‚  [æŸ¥çœ‹å‘å¸ƒé¡µ]        [å‡çº§ 5MB] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### çŠ¶æ€æœº

| æ£€æŸ¥çŠ¶æ€ | ä¸‹è½½çŠ¶æ€ | UI å±•ç¤º |
|----------|----------|---------|
| checking | idle | åŠ è½½åŠ¨ç”» + "æ­£åœ¨æ£€æŸ¥æ›´æ–°..." |
| latest | idle | ç»¿è‰² âœ“ + "å·²æ˜¯æœ€æ–°ç‰ˆæœ¬" |
| available | idle | æ–°ç‰ˆæœ¬ä¿¡æ¯ + å‡çº§æŒ‰é’® |
| error | idle | é”™è¯¯ä¿¡æ¯ + é‡è¯•æŒ‰é’® |
| available | downloading | è¿›åº¦æ¡ + ç™¾åˆ†æ¯” |
| available | completed | "å®‰è£…ç¨‹åºå·²å¯åŠ¨" |

### å¹³å°å®‰è£…åŒ…åŒ¹é…

| å¹³å° | åŒ¹é…è§„åˆ™ |
|------|----------|
| macOS aarch64 | `_aarch64.dmg` |
| macOS x86_64 | `_x64.dmg` |
| Windows | `_x64-setup.exe` æˆ– `_x64_en-US.msi` |
| Linux | `_amd64.AppImage` æˆ– `_amd64.deb` |

### ä¸‹è½½æµç¨‹

```
fetch(downloadUrl) â†’ response.arrayBuffer() â†’ Uint8Array
â†’ writeFile(assetName, data, { baseDir: Download })
â†’ downloadDir() è·å–ç»å¯¹è·¯å¾„
â†’ openPath(fullPath) æ‰“å¼€å®‰è£…åŒ…
â†’ 1s å»¶è¿Ÿ â†’ invoke('exit_app')
```

### æ„å»ºæ—¶ç‰ˆæœ¬æ³¨å…¥

```javascript
// vite.config.js
import { readFileSync } from "fs";
const pkg = JSON.parse(readFileSync('./package.json', 'utf-8'));
define: { __APP_VERSION__: JSON.stringify(pkg.version) }
```

```typescript
// src/app.d.ts
declare const __APP_VERSION__: string;
```

### è¾¹ç•Œæƒ…å†µ

| åœºæ™¯ | å¤„ç†æ–¹å¼ |
|------|----------|
| ç½‘ç»œä¸é€š / API ä¸å¯è¾¾ | é™é»˜å¤±è´¥ï¼Œä¸æ‰“æ‰°ç”¨æˆ·ï¼›å¼¹çª—ä¸­æ˜¾ç¤ºé‡è¯• |
| GitHub é™æµ (403/429) | æ˜¾ç¤ºå‹å¥½é”™è¯¯æç¤º |
| æ— åŒ¹é…å¹³å°å®‰è£…åŒ… | downloadUrl ä¸º nullï¼Œæ˜¾ç¤ºæ‰‹åŠ¨ä¸‹è½½é“¾æ¥ |
| é¦–æ¬¡å®‰è£…ï¼ˆæ—  lastUpdateCheckDateï¼‰ | é»˜è®¤ null â†’ é¦–æ¬¡å¯åŠ¨è§¦å‘æ£€æŸ¥ |
| å¤šçª—å£ | updateStore å•ä¾‹å…±äº« |

### æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | ç±»å‹ | è¡Œæ•° | è¯´æ˜ |
|------|------|------|------|
| `src-tauri/src/commands/update.rs` | æ–°å»º | 20 | get_platform_info + exit_app å‘½ä»¤ |
| `src-tauri/src/commands/mod.rs` | ä¿®æ”¹ | â€” | æ·»åŠ  pub mod update |
| `src-tauri/src/lib.rs` | ä¿®æ”¹ | â€” | æ³¨å†Œæ–°å‘½ä»¤ |
| `src/lib/services/update-service.ts` | æ–°å»º | 283 | GitHub ç‰ˆæœ¬æ£€æŸ¥ + ä¸‹è½½å®‰è£… + updateStore |
| `src/lib/components/UpdateDialog.svelte` | æ–°å»º | 379 | ç‰ˆæœ¬ä¿¡æ¯å¼¹çª— |
| `src/lib/components/StatusBar.svelte` | ä¿®æ”¹ | â€” | å‡çº§æŒ‡ç¤ºå™¨ â¬†ï¸ |
| `src/lib/stores/settings-store.ts` | ä¿®æ”¹ | â€” | æ–°å¢ lastUpdateCheckDate |
| `src/lib/components/SettingsPanel.svelte` | ä¿®æ”¹ | â€” | ç‰ˆæœ¬å·æ”¹ç”¨ __APP_VERSION__ |
| `src/app.d.ts` | æ–°å»º | 1 | __APP_VERSION__ TypeScript å£°æ˜ |
| `vite.config.js` | ä¿®æ”¹ | â€” | æ³¨å…¥ __APP_VERSION__ ç¼–è¯‘æ—¶å¸¸é‡ |

---

## F5.9 å¤šçª—å£ä¸ macOS Dock é›†æˆ

### éœ€æ±‚æè¿°

æ”¯æŒåŒæ—¶æ‰“å¼€å¤šä¸ªæ–‡æ¡£çª—å£ï¼Œæ¯ä¸ªçª—å£ç‹¬ç«‹è¿è¡Œã€‚macOS ä¸‹é›†æˆåŸç”Ÿ Window èœå•ï¼ˆçª—å£åˆ—è¡¨åˆ‡æ¢ï¼‰å’Œ Dock å³é”®èœå•ï¼ˆå¿«é€Ÿæ–°å»ºçª—å£ï¼‰ã€‚

### å¤šçª—å£æ¶æ„

```typescript
// Rust ä¾§
pub struct PendingFiles(pub Mutex<HashMap<String, String>>);  // label â†’ filePath
static WINDOW_COUNTER: AtomicU32 = AtomicU32::new(0);

fn create_editor_window(
    app: &AppHandle,
    pending: &PendingFiles,
    path: Option<String>,  // None = ç©ºç™½çª—å£
) -> Result<String, String>;
```

- æ¯ä¸ªçª—å£æœ‰å”¯ä¸€æ ‡ç­¾ `moraya-{N}`
- çª—å£åˆ›å»ºæ—¶æå–æ–‡ä»¶åä½œä¸ºåŸç”Ÿçª—å£æ ‡é¢˜ï¼ˆæ˜¾ç¤ºåœ¨ Dock å’Œ Window èœå•ï¼‰
- å‰ç«¯ `TitleBar.svelte` é€šè¿‡ `$effect` åŒæ­¥ `displayTitle` â†’ `appWindow.setTitle()`
- Tauri æƒé™ `core:window:allow-set-title` ç¡®ä¿ setTitle ç”Ÿæ•ˆ

### Window èœå•

```rust
let window_menu = Submenu::with_id_and_items(
    app, "menu_window", "Window", true,
    &[
        &PredefinedMenuItem::minimize(app, None)?,
        &PredefinedMenuItem::maximize(app, None)?,
        &PredefinedMenuItem::fullscreen(app, None)?,
    ],
)?;

// macOS: è®©ç³»ç»Ÿè‡ªåŠ¨å¡«å……çª—å£åˆ—è¡¨
let _ = window_menu.set_as_windows_menu_for_nsapp();
```

### macOS Dock å³é”®èœå•

é€šè¿‡ `objc` crate è°ƒç”¨ `[NSApp setDockMenu:]` æ·»åŠ åŸç”Ÿ Dock èœå•ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ–°å»ºçª—å£              â”‚  â† è‡ªå®šä¹‰é¡¹ï¼ˆä¸­è‹±æ–‡è‡ªé€‚åº”ï¼‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  README.md             â”‚  â† macOS è‡ªåŠ¨å¡«å……
â”‚  my-article.md         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é€‰é¡¹                  â”‚  â† ç³»ç»Ÿæ ‡å‡†é¡¹
â”‚  é€€å‡º                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- ä½¿ç”¨ ObjC è¿è¡Œæ—¶å£°æ˜ `MorayaDockHelper` ç±»å¤„ç†èœå•äº‹ä»¶
- é€šè¿‡ `OnceLock<AppHandle>` åœ¨å›è°ƒä¸­å®‰å…¨è®¿é—® Tauri åº”ç”¨
- æ£€æµ‹ç³»ç»Ÿè¯­è¨€è‡ªåŠ¨é€‰æ‹© "New Window" / "æ–°å»ºçª—å£"

### Dock å›¾æ ‡ç‚¹å‡»è¡Œä¸º

- æ‰€æœ‰çª—å£å…³é—­åç‚¹å‡» Dock å›¾æ ‡ â†’ è‡ªåŠ¨åˆ›å»ºæ–°ç©ºç™½çª—å£ï¼ˆ`RunEvent::Reopen`ï¼‰
- é€šè¿‡æ–‡ä»¶å…³è”æ‰“å¼€æ–‡ä»¶ â†’ åœ¨æ–°çª—å£ä¸­æ‰“å¼€ï¼ˆ`RunEvent::Opened`ï¼‰

### æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | ç±»å‹ | è¡Œæ•° | è¯´æ˜ |
|------|------|------|------|
| `src-tauri/src/dock.rs` | æ–°å»º | 80 | macOS Dock èœå•ï¼ˆObjC æ¡¥æ¥ï¼‰ |
| `src-tauri/src/lib.rs` | ä¿®æ”¹ | â€” | å¤šçª—å£æ¶æ„ + RunEvent å¤„ç† |
| `src-tauri/src/menu.rs` | ä¿®æ”¹ | â€” | Window èœå• + New Window èœå•é¡¹ |
| `src-tauri/Cargo.toml` | ä¿®æ”¹ | â€” | macOS: objc = "0.2" |
| `src-tauri/capabilities/default.json` | ä¿®æ”¹ | â€” | æ–°å¢ core:window:allow-set-title |
| `src/lib/components/TitleBar.svelte` | ä¿®æ”¹ | â€” | åŠ¨æ€åŒæ­¥åŸç”Ÿçª—å£æ ‡é¢˜ |

---

## é™„åŠ å¢å¼º

### AI é¢æ¿å¯æ‹–æ‹½å®½åº¦

- AI èŠå¤©é¢æ¿å·¦ä¾§è¾¹ç¼˜å¯æ‹–æ‹½è°ƒæ•´å®½åº¦
- èŒƒå›´ï¼š280px ~ 800pxï¼Œé»˜è®¤ 340px

### Toast é€šçŸ¥ç»„ä»¶

- å…¨å±€ Toast é€šçŸ¥ï¼ˆå³ä¸Šè§’ï¼‰ï¼Œæ”¯æŒ success / error ä¸¤ç§ç±»å‹
- æ»‘å…¥åŠ¨ç”»ï¼Œè‡ªåŠ¨æ¶ˆå¤±

| æ–‡ä»¶ | ç±»å‹ | è¡Œæ•° | è¯´æ˜ |
|------|------|------|------|
| `src/lib/components/Toast.svelte` | æ–°å»º | 79 | Toast é€šçŸ¥ç»„ä»¶ |
| `src/lib/components/ai/AIChatPanel.svelte` | ä¿®æ”¹ | â€” | æ–°å¢ resize-handle + æ‹–æ‹½é€»è¾‘ |

---

## Settings æ ‡ç­¾é¡µæ€»è§ˆ

v0.2.0 å®Œæˆåï¼ŒSettings é¢æ¿åŒ…å«ä»¥ä¸‹æ ‡ç­¾é¡µï¼š

| æ ‡ç­¾ | å›¾æ ‡ | å†…å®¹ |
|------|------|------|
| é€šç”¨ | âš™ | è¯­è¨€ã€è‡ªåŠ¨ä¿å­˜ |
| ç¼–è¾‘å™¨ | âœ | è¡Œå®½ã€åˆ¶è¡¨ç¬¦ã€è¡Œå· |
| å¤–è§‚ | â— | ä¸»é¢˜ã€æ·±è‰²æ¨¡å¼ã€å­—ä½“ |
| AI | âœ¦ | å¯¹è¯ AI é…ç½® + å›¾ç‰‡ç”Ÿæˆ AI é…ç½® |
| MCP | â‡Œ | MCP æœåŠ¡å™¨ç®¡ç† |
| å›¾ç‰‡ | â–£ | å›¾åºŠæœåŠ¡é…ç½® |
| å‘å¸ƒ | ğŸ“® | å‘å¸ƒç›®æ ‡ç®¡ç† |

---

## æ–°å¢æ–‡ä»¶æ€»è§ˆ

| æ–‡ä»¶è·¯å¾„ | è¡Œæ•° | åŠŸèƒ½ |
|----------|------|------|
| `src/lib/components/SEOPanel.svelte` | 474 | SEO åº•éƒ¨æŠ½å±‰ |
| `src/lib/components/ImageGenDialog.svelte` | 841 | é…å›¾ä¸‰æ­¥å‘å¯¼ï¼ˆ5 æ¨¡å¼ Ã— 10 é£æ ¼ï¼‰ |
| `src/lib/components/PublishWorkflow.svelte` | 183 | åˆ›ä½œå·¥ä½œæµé¢æ¿ |
| `src/lib/components/PublishConfirm.svelte` | 232 | å‘å¸ƒç¡®è®¤æµ®å±‚ |
| `src/lib/components/PublishSettings.svelte` | 616 | å‘å¸ƒç›®æ ‡é…ç½®ï¼ˆå«æ–‡ä»¶å‘½åè§„åˆ™ï¼‰ |
| `src/lib/components/ImageHostingSettings.svelte` | 424 | å›¾åºŠæœåŠ¡é…ç½® |
| `src/lib/components/UpdateDialog.svelte` | 379 | ç‰ˆæœ¬ä¿¡æ¯ + å‡çº§å¼¹çª— |
| `src/lib/components/Toast.svelte` | 79 | Toast é€šçŸ¥ç»„ä»¶ |
| `src/lib/editor/ImageToolbar.svelte` | 95 | æµ®åŠ¨ç¼©æ”¾å·¥å…·æ¡ |
| `src/lib/editor/ImageContextMenu.svelte` | 161 | å›¾ç‰‡å³é”®ä¸Šä¸‹æ–‡èœå• |
| `src/lib/services/ai/seo-service.ts` | 63 | SEO åˆ†ææœåŠ¡ |
| `src/lib/services/ai/image-service.ts` | 290 | å›¾ç‰‡ç”ŸæˆæœåŠ¡ï¼ˆå« DashScope é€‚é…ï¼‰ |
| `src/lib/services/update-service.ts` | 283 | GitHub ç‰ˆæœ¬æ£€æŸ¥ + ä¸‹è½½å®‰è£… |
| `src/lib/services/publish/types.ts` | 183 | å‘å¸ƒç±»å‹å®šä¹‰ + æ–‡ä»¶å‘½å |
| `src/lib/services/publish/github-publisher.ts` | 163 | GitHub Contents API å‘å¸ƒ |
| `src/lib/services/publish/api-publisher.ts` | 65 | Custom API å‘å¸ƒ |
| `src/lib/services/publish/index.ts` | 14 | å‘å¸ƒæ¨¡å—å¯¼å‡º |
| `src/lib/services/image-hosting/types.ts` | â€” | å›¾åºŠç±»å‹å®šä¹‰ |
| `src/lib/services/image-hosting/providers.ts` | â€” | å›¾åºŠä¸Šä¼ é€»è¾‘ |
| `src/lib/services/image-hosting/index.ts` | â€” | å›¾åºŠæ¨¡å—å¯¼å‡º |
| `src-tauri/src/commands/update.rs` | 20 | å¹³å°ä¿¡æ¯ + é€€å‡ºå‘½ä»¤ |
| `src-tauri/src/dock.rs` | 80 | macOS Dock èœå• |
| `src/app.d.ts` | 1 | __APP_VERSION__ å£°æ˜ |

**å…±è®¡ 23 ä¸ªæ–°æ–‡ä»¶ï¼Œçº¦ 4,700 è¡Œä»£ç **

## ä¿®æ”¹æ–‡ä»¶æ€»è§ˆ

| æ–‡ä»¶è·¯å¾„ | ä¿®æ”¹å†…å®¹ |
|----------|----------|
| `src-tauri/Cargo.toml` | ç‰ˆæœ¬ 0.2.0ã€tauri-plugin-httpã€macOS objc |
| `src-tauri/tauri.conf.json` | ç‰ˆæœ¬ 0.2.0 |
| `src-tauri/src/lib.rs` | å¤šçª—å£æ¶æ„ã€RunEventã€Dock èœå•ã€æ–°å‘½ä»¤æ³¨å†Œ |
| `src-tauri/src/menu.rs` | Window èœå•ã€New Windowã€Version Info |
| `src-tauri/src/commands/mod.rs` | æ–°å¢ pub mod update |
| `src-tauri/capabilities/default.json` | core:window:allow-set-title |
| `src/lib/services/ai/types.ts` | SEODataã€ImageProviderConfigã€IMAGE_SIZE_MAP |
| `src/lib/services/ai/ai-service.ts` | å›¾ç‰‡ç”Ÿæˆé›†æˆ |
| `src/lib/services/ai/index.ts` | å¯¼å‡ºæ–°æœåŠ¡ |
| `src/lib/stores/settings-store.ts` | imageProviderConfigã€imageHostConfigã€publishTargetsã€lastUpdateCheckDate |
| `src/lib/components/ai/AISettings.svelte` | å›¾ç‰‡ç”Ÿæˆ AI é…ç½®åŒºå— |
| `src/lib/components/ai/AIChatPanel.svelte` | å¯æ‹–æ‹½å®½åº¦ |
| `src/lib/components/StatusBar.svelte` | åˆ›ä½œå·¥ä½œæµæŒ‰é’® + å‡çº§æŒ‡ç¤ºå™¨ |
| `src/lib/components/SettingsPanel.svelte` | æ–°å¢å›¾ç‰‡ / å‘å¸ƒæ ‡ç­¾é¡µ + __APP_VERSION__ |
| `src/lib/components/TitleBar.svelte` | åŠ¨æ€åŸç”Ÿçª—å£æ ‡é¢˜åŒæ­¥ |
| `src/lib/editor/Editor.svelte` | å›¾ç‰‡äº¤äº’ï¼ˆå•å‡»å·¥å…·æ¡ + å³é”®èœå•ï¼‰ |
| `src/lib/styles/editor.css` | å›¾ç‰‡ç¼©æ”¾æ ·å¼ |
| `src/lib/i18n/locales/en.json` | +194 è¡Œæ–° i18n key |
| `src/lib/i18n/locales/zh-CN.json` | +194 è¡Œæ–° i18n key |
| `src/routes/+page.svelte` | +281 è¡Œï¼šå·¥ä½œæµçŠ¶æ€ã€èœå•äº‹ä»¶ã€æ¯æ—¥æ£€æŸ¥ã€ç»„ä»¶é›†æˆ |
| `vite.config.js` | __APP_VERSION__ ç¼–è¯‘æ—¶æ³¨å…¥ |
| `package.json` | ç‰ˆæœ¬ 0.2.0ã€version:bump è„šæœ¬ |

**å…±è®¡ 27 ä¸ªä¿®æ”¹æ–‡ä»¶**

---

## ä¾èµ–å˜æ›´

### Rust æ–°å¢

| ä¾èµ– | ç‰ˆæœ¬ | å¹³å° | ç”¨é€” |
|------|------|------|------|
| `tauri-plugin-http` | 2 | å…¨å¹³å° | AIGC API è°ƒç”¨ã€å‡çº§æ£€æŸ¥ |
| `objc` | 0.2 | macOS | Dock èœå• ObjC æ¡¥æ¥ |

### å‰ç«¯

æ— æ–°å¢ npm ä¾èµ–ã€‚æ‰€æœ‰æ–°åŠŸèƒ½å‡åŸºäºç°æœ‰ä¾èµ–å®ç°ï¼ˆTauri æ’ä»¶ + åŸç”Ÿ APIï¼‰ã€‚

---

## ä»£ç ç»Ÿè®¡

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| æ–‡ä»¶å˜æ›´æ€»æ•° | 50 |
| æ–°å¢æ–‡ä»¶ | 23 |
| ä¿®æ”¹æ–‡ä»¶ | 27 |
| æ–°å¢ä»£ç è¡Œ | 6,831 |
| åˆ é™¤ä»£ç è¡Œ | 57 |
| å‡€å¢ä»£ç è¡Œ | 6,774 |
| æ–°å¢ Svelte ç»„ä»¶ | 10 |
| æ–°å¢ TypeScript æœåŠ¡ | 7 |
| æ–°å¢ Rust æ–‡ä»¶ | 2 |
| æ–°å¢ i18n key | ~194 Ã— 2 |

---

## ä¸ v0.1.3 çš„å¯¹æ¯”

| ç»´åº¦ | v0.1.3 | v0.2.0 |
|------|--------|--------|
| å®šä½ | Markdown ç¼–è¾‘å™¨ | åˆ›ä½œå‘å¸ƒä¸€ç«™å¼å·¥å…· |
| çª—å£ | å•çª—å£ | å¤šçª—å£ + Dock é›†æˆ |
| AI èƒ½åŠ› | å¯¹è¯ AI + MCP | + SEO åˆ†æ + AIGC é…å›¾ |
| å‘å¸ƒ | æ—  | GitHub + Custom API å¤šç›®æ ‡ |
| å›¾ç‰‡ | ä»…æ’å…¥ | ç¼©æ”¾ + å›¾åºŠ + AI ç”Ÿæˆ |
| å‡çº§ | æ‰‹åŠ¨ä¸‹è½½ | è‡ªåŠ¨æ£€æŸ¥ + ä¸€é”®å‡çº§ |
| Settings æ ‡ç­¾ | 5 ä¸ª | 7 ä¸ªï¼ˆ+ å›¾ç‰‡ã€å‘å¸ƒï¼‰ |
| å®‰è£…åŒ… | ~3.5 MB | ~5 MB |

---

## éªŒè¯æ–¹æ¡ˆ

1. `pnpm check` â€” é›¶ TypeScript é”™è¯¯ âœ…
2. `cargo check` â€” Rust ç¼–è¯‘é€šè¿‡ âœ…
3. åŠŸèƒ½éªŒè¯ï¼š
   - SEOï¼šé…ç½® AI â†’ å†™æ–‡ç«  â†’ è§¦å‘ SEO â†’ å…ƒæ•°æ®æ­£ç¡®ç”Ÿæˆå¹¶å­˜å…¥ store
   - é…å›¾ï¼šé…ç½® AIGC â†’ é€‰æ‹©æ¨¡å¼/é£æ ¼/æ¯”ä¾‹ â†’ ç”Ÿæˆæç¤ºè¯ â†’ ç”Ÿæˆå›¾ç‰‡ â†’ é¢„è§ˆæ¯”ä¾‹è‡ªé€‚åº” â†’ æ’å…¥æ–‡ç« ï¼ˆè·³è¿‡ä»£ç å—ï¼‰
   - å‘å¸ƒï¼šé…ç½® GitHub ç›®æ ‡ â†’ å‘å¸ƒ â†’ ç¡®è®¤ä»“åº“ä¸­æ–‡ä»¶è·¯å¾„æ­£ç¡®
   - å·¥ä½œæµï¼šStatusBar æŒ‰é’® â†’ æ­¥éª¤é¢æ¿ â†’ SEO â˜‘ â†’ é…å›¾ â˜‘ â†’ å‘å¸ƒ â†’ å®Œæˆ
   - å›¾ç‰‡ç¼©æ”¾ï¼šæ’å…¥å›¾ç‰‡ â†’ å•å‡»å·¥å…·æ¡ â†’ é€‰æ‹©ç™¾åˆ†æ¯” â†’ å³é”®èœå• â†’ å…¨éƒ¨æ“ä½œ
   - å›¾åºŠï¼šé…ç½®å›¾åºŠ â†’ æµ‹è¯•ä¸Šä¼  â†’ å³é”®ä¸Šä¼  â†’ URL æ›¿æ¢
   - å‡çº§ï¼šé¦–æ¬¡å¯åŠ¨é™é»˜æ£€æŸ¥ â†’ StatusBar â¬†ï¸ â†’ å¼¹çª— â†’ ä¸‹è½½å®‰è£…
   - å¤šçª—å£ï¼šDock å³é”® New Window â†’ Window èœå•åˆ‡æ¢ â†’ æ–‡ä»¶å…³è”æ–°çª—å£
