# 007 â€” MCP å¸‚åœºï¼šå¤šæ•°æ®æºæµè§ˆä¸ä¸€é”®å®‰è£… (v0.3.1)

è¿­ä»£ç‰ˆæœ¬: v0.3.1
ä¸Šä¸€ç‰ˆæœ¬: v0.3.0
åˆ›å»ºæ—¥æœŸ: 2026-02-08
çŠ¶æ€: å¾…å®æ–½

---

## ç‰ˆæœ¬æ¦‚è¦

åœ¨ MCP è®¾ç½®é¡µé¢æ–°å¢ã€ŒMCP å¸‚åœºã€åŠŸèƒ½ï¼Œç”¨æˆ·å¯æµè§ˆæ¥è‡ªå¤šä¸ª MCP Registry çš„æœåŠ¡ç›®å½•ï¼Œå‘ç°æ„Ÿå…´è¶£çš„ MCP Server åä¸€é”®æ·»åŠ åˆ°æœ¬åœ°é…ç½®ã€‚æ”¯æŒä¸‰ä¸ªæ•°æ®æºå¯åˆ‡æ¢ï¼Œå…¼é¡¾å›½é™…ä¸å›½å†…ç½‘ç»œç¯å¢ƒã€‚

**æ ¸å¿ƒä»·å€¼**: é™ä½ MCP ä½¿ç”¨é—¨æ§› â€” ä»ã€Œæ‰‹åŠ¨æŸ¥åŒ…å + å¡«å‘½ä»¤ + é…ç¯å¢ƒå˜é‡ã€ç®€åŒ–ä¸ºã€Œæœç´¢ â†’ ä¸€é”®å®‰è£… â†’ å¡« API Keyã€ã€‚

---

## åŠŸèƒ½æ¸…å•

| ID | åŠŸèƒ½ | ç±»å‹ | ä¼˜å…ˆçº§ | çŠ¶æ€ |
|----|------|------|--------|------|
| F1 | MCP å¸‚åœºæ•°æ®æºæœåŠ¡ | æœåŠ¡å±‚ | P0 | å¾…å®æ–½ |
| F2 | MCP å¸‚åœºæµè§ˆ UI | ç•Œé¢ | P0 | å¾…å®æ–½ |
| F3 | ä¸€é”®å®‰è£… MCP Server | äº¤äº’ | P0 | å¾…å®æ–½ |
| F4 | æ•°æ®æºåˆ‡æ¢è®¾ç½® | è®¾ç½® | P1 | å¾…å®æ–½ |
| F5 | i18n å›½é™…åŒ– | åŸºç¡€ | P1 | å¾…å®æ–½ |

---

## æ•°æ®æºè§„æ ¼

### æ•°æ®æº 1: Anthropic MCP Registryï¼ˆé»˜è®¤ï¼‰

| é¡¹ç›® | å€¼ |
|------|-----|
| åç§° | Official MCP Registry |
| ç«¯ç‚¹ | `GET https://registry.modelcontextprotocol.io/v0.1/servers` |
| è®¤è¯ | æ— éœ€è®¤è¯ |
| åˆ†é¡µ | Cursor-based (`cursor` å‚æ•°, `metadata.nextCursor`) |
| æœç´¢ | `search` å‚æ•°ï¼ˆå­ä¸²åŒ¹é…ï¼‰ |
| è¿‡æ»¤ | `version=latest` åªè¿”å›æœ€æ–°ç‰ˆæœ¬ |
| å›½å†…è®¿é—® | å¯èƒ½å—é™ |

**æœç´¢è¯·æ±‚ç¤ºä¾‹**:
```
GET /v0.1/servers?search=tavily&version=latest&limit=20
```

**å“åº”ç»“æ„**:
```typescript
interface OfficialRegistryResponse {
  servers: Array<{
    server: {
      name: string;            // "io.github.tavily-ai/tavily-mcp"
      title?: string;          // "Tavily MCP"
      description: string;
      version: string;
      repository?: { url: string; source: string };
      websiteUrl?: string;
      icons?: Array<{ src: string; mimeType: string }>;
      packages?: Array<{
        registryType: string;  // "npm" | "oci"
        identifier: string;    // npm åŒ…å, e.g. "tavily-mcp"
        version: string;
        transport: string;     // "stdio"
        environmentVariables?: Array<{
          name: string;        // "TAVILY_API_KEY"
          description: string;
          format: string;      // "string"
          isSecret: boolean;   // true â†’ å¯†ç è¾“å…¥æ¡†
        }>;
      }>;
      remotes?: Array<{
        type: string;          // "streamable-http"
        url: string;
      }>;
    };
    _meta?: {
      'io.modelcontextprotocol.registry/official'?: {
        status: string;
        publishedAt: string;
        updatedAt: string;
        isLatest: boolean;
      };
    };
  }>;
  metadata: {
    nextCursor: string | null;
    count: number;
  };
}
```

**ä¸€é”®å®‰è£…æ˜ å°„è§„åˆ™**:
- `packages[0].registryType === "npm"` â†’ `command: "npx"`, `args: ["-y", identifier]`
- `packages[0].transport === "stdio"` â†’ `transport.type: "stdio"`
- `packages[0].environmentVariables` â†’ è‡ªåŠ¨ç”Ÿæˆ env è¡¨å•

### æ•°æ®æº 2: LobeHub MCP Marketplace

| é¡¹ç›® | å€¼ |
|------|-----|
| åç§° | LobeHub MCP |
| ç«¯ç‚¹ | `GET https://market.lobehub.com/api/v1/plugins` |
| è®¤è¯ | æ— éœ€è®¤è¯ |
| åˆ†é¡µ | Page-based (`page`, `pageSize`) |
| æœç´¢ | `search` å‚æ•° |
| å›½å†…è®¿é—® | ç›´æ¥å¯è¾¾ |

**æœç´¢è¯·æ±‚ç¤ºä¾‹**:
```
GET /api/v1/plugins?search=github&page=1&pageSize=20
```

**å“åº”ç»“æ„**:
```typescript
interface LobeHubResponse {
  items: Array<{
    identifier: string;       // "microsoft-playwright-mcp"
    name: string;             // "Playwright MCP"
    author: string;
    description: string;
    category: string;         // "developer"
    connectionType: string;   // "local" | "hybrid" | "remote"
    icon: string;             // URL
    homepage: string;
    version: string;
    installCount: number;
    toolsCount: number;
    capabilities: { tools: boolean; resources: boolean; prompts: boolean };
    github?: { url: string; stars: number; license: string };
    isOfficial: boolean;
    isValidated: boolean;
    isFeatured: boolean;
    manifestUrl: string;      // è·å–è¯¦ç»†é…ç½®çš„ URL
  }>;
  categories: string[];
  currentPage: number;
  pageSize: number;
  totalCount: number;
  totalPages: number;
}
```

**ä¸€é”®å®‰è£…æ˜ å°„è§„åˆ™**:
- `identifier` é€šå¸¸å³ npm åŒ…å â†’ `command: "npx"`, `args: ["-y", identifier]`
- `connectionType === "local"` â†’ `transport.type: "stdio"`
- éœ€é¢å¤–è¯·æ±‚ `manifestUrl` è·å– env å˜é‡å®šä¹‰ï¼ˆå¯é€‰ï¼Œé™çº§ä¸ºæ‰‹åŠ¨å¡«å†™ï¼‰

### æ•°æ®æº 3: Smithery Registry

| é¡¹ç›® | å€¼ |
|------|-----|
| åç§° | Smithery |
| ç«¯ç‚¹ | `GET https://registry.smithery.ai/servers` |
| è®¤è¯ | å…¬å¼€æœç´¢æ— éœ€è®¤è¯ |
| åˆ†é¡µ | Page-based (`page`, `pageSize`) |
| æœç´¢ | `q` å‚æ•°ï¼ˆè¯­ä¹‰æœç´¢ + è¿‡æ»¤: `owner:`, `repo:`, `is:deployed`, `is:verified`ï¼‰ |
| å›½å†…è®¿é—® | å¯èƒ½å—é™ |

**æœç´¢è¯·æ±‚ç¤ºä¾‹**:
```
GET /servers?q=github&page=1&pageSize=20
```

**å“åº”ç»“æ„**:
```typescript
interface SmitheryResponse {
  servers: Array<{
    qualifiedName: string;    // "github"
    displayName: string;      // "GitHub"
    description: string;
    iconUrl: string | null;
    verified: boolean;
    useCount: number;         // çƒ­åº¦æ’åºä¾æ®
    remote: boolean;
    createdAt: string;
    homepage: string;         // "https://smithery.ai/server/github"
  }>;
  pagination: {
    currentPage: number;
    pageSize: number;
    totalPages: number;
    totalCount: number;
  };
}
```

**è¯¦æƒ…ç«¯ç‚¹**ï¼ˆä¸€é”®å®‰è£…æ—¶è¯·æ±‚ï¼‰:
```
GET https://registry.smithery.ai/servers/{qualifiedName}
```
è¿”å› `connections[]` å« `configSchema`ï¼ˆJSON Schemaï¼‰ï¼Œ`tools[]` å«å·¥å…·åˆ—è¡¨ã€‚

**ä¸€é”®å®‰è£…æ˜ å°„è§„åˆ™**:
- Smithery æ•°æ®ä»¥ remote éƒ¨ç½²ä¸ºä¸»ï¼Œ`connections[0].deploymentUrl` â†’ `transport.type: "http"`
- æœ¬åœ°å®‰è£…éœ€ç”¨æˆ·è¡¥å…… npm åŒ…åï¼ˆSmithery ä¸ç›´æ¥æä¾› npm identifierï¼‰

---

## F1: MCP å¸‚åœºæ•°æ®æºæœåŠ¡

### éœ€æ±‚

åˆ›å»ºç»Ÿä¸€çš„æ•°æ®æºæŠ½è±¡å±‚ï¼Œå°†ä¸‰ä¸ª Registry çš„å·®å¼‚å°è£…ä¸ºç»Ÿä¸€æ¥å£ã€‚å‰ç«¯è°ƒç”¨ç»Ÿä¸€ APIï¼Œæ— éœ€å…³å¿ƒåº•å±‚æ•°æ®æºå·®å¼‚ã€‚

### ç±»å‹å®šä¹‰

```typescript
/** ç»Ÿä¸€çš„ MCP å¸‚åœºæœåŠ¡å™¨æ¡ç›® */
interface MarketplaceServer {
  id: string;                   // æ•°æ®æºå†…å”¯ä¸€ ID
  name: string;                 // æ˜¾ç¤ºåç§°
  description: string;
  author?: string;
  icon?: string;                // icon URL
  version?: string;
  homepage?: string;            // è¯¦æƒ…é¡µé“¾æ¥
  repository?: string;          // GitHub ä»“åº“ URL
  popularity?: number;          // å®‰è£…æ•°/ä½¿ç”¨æ•°ï¼ˆç”¨äºæ’åºï¼‰
  verified?: boolean;
  tags?: string[];              // åˆ†ç±»æ ‡ç­¾
  // ä¸€é”®å®‰è£…æ‰€éœ€ä¿¡æ¯
  install?: MarketplaceInstallInfo;
}

interface MarketplaceInstallInfo {
  transport: 'stdio' | 'http' | 'sse';
  command?: string;             // e.g. "npx"
  args?: string[];              // e.g. ["-y", "tavily-mcp"]
  url?: string;                 // remote endpoint
  envVars?: Array<{
    name: string;
    description: string;
    isSecret: boolean;
  }>;
}

/** æ•°æ®æºé…ç½® */
type MarketplaceSource = 'official' | 'lobehub' | 'smithery';

interface MarketplaceSearchParams {
  query: string;
  page: number;
  pageSize: number;
}

interface MarketplaceSearchResult {
  servers: MarketplaceServer[];
  totalCount: number;
  hasMore: boolean;
}
```

### æ•°æ®æºé€‚é…å™¨

æ¯ä¸ªæ•°æ®æºå®ç°ç»Ÿä¸€æ¥å£ï¼š

```typescript
interface MarketplaceAdapter {
  search(params: MarketplaceSearchParams): Promise<MarketplaceSearchResult>;
}
```

- `OfficialRegistryAdapter`: cursor â†’ page æ¨¡æ‹Ÿï¼Œ`packages[0]` â†’ `install` æ˜ å°„
- `LobeHubAdapter`: ç›´æ¥æ˜ å°„ï¼Œ`identifier` â†’ npm åŒ…å
- `SmitheryAdapter`: æœç´¢åˆ—è¡¨ + è¯¦æƒ…è¯·æ±‚åˆå¹¶

### ç½‘ç»œè¯·æ±‚

ä½¿ç”¨é¡¹ç›®å·²æœ‰çš„ `@tauri-apps/plugin-http` (fetch) å‘èµ·è·¨åŸŸè¯·æ±‚ï¼Œæ— éœ€é¢å¤–ä¾èµ–ã€‚

### æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `src/lib/services/mcp/marketplace.ts` | æ–°å»º | æ•°æ®æºæœåŠ¡ï¼šç±»å‹å®šä¹‰ã€é€‚é…å™¨ã€ç»Ÿä¸€æœç´¢æ¥å£ |

---

## F2: MCP å¸‚åœºæµè§ˆ UI

### éœ€æ±‚

åœ¨ MCPPanel çš„ tab æ æ–°å¢ã€Œå¸‚åœºã€æ ‡ç­¾é¡µï¼Œå±•ç¤º MCP Server åˆ—è¡¨ï¼Œæ”¯æŒæœç´¢ã€æ»šåŠ¨åŠ è½½ã€‚

### UI äº¤äº’

#### å…¥å£

MCPPanel ç°æœ‰ 3 ä¸ª tab: `servers` | `publish` | `sync`ï¼Œæ–°å¢ç¬¬ 4 ä¸ª: `marketplace`

```
[ æœåŠ¡å™¨ | å‘å¸ƒ | åŒæ­¥ | å¸‚åœº ]
```

#### å¸‚åœºé¡µé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” [ æœç´¢ MCP æœåŠ¡...       ]  â”‚  â† æœç´¢æ¡†
â”‚ æ•°æ®æº: [Official â–¾]           â”‚  â† æ•°æ®æºåˆ‡æ¢ä¸‹æ‹‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ”Œ Tavily Search           â”‚ â”‚  â† æœåŠ¡å¡ç‰‡
â”‚ â”‚ Web search via Tavily API  â”‚ â”‚
â”‚ â”‚ â­ 12.3k  âœ“ verified      â”‚ â”‚
â”‚ â”‚            [ + å®‰è£… ]      â”‚ â”‚  â† ä¸€é”®å®‰è£…æŒ‰é’®
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“ Filesystem              â”‚ â”‚
â”‚ â”‚ Read/write local files     â”‚ â”‚
â”‚ â”‚ â­ 8.5k                    â”‚ â”‚
â”‚ â”‚            [ + å®‰è£… ]      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           ...                   â”‚
â”‚      [ åŠ è½½æ›´å¤š ]               â”‚  â† åˆ†é¡µåŠ è½½
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æœåŠ¡å¡ç‰‡ä¿¡æ¯

- **å·¦ä¾§**: iconï¼ˆå¦‚æœ‰ï¼‰+ åç§° + æè¿°ï¼ˆ2 è¡Œæˆªæ–­ï¼‰
- **å³ä¸‹è§’**: å®‰è£…æ•°/ä½¿ç”¨æ•° + verified å¾½ç« ï¼ˆå¦‚æœ‰ï¼‰
- **å³ä¾§**: ã€Œå®‰è£…ã€æŒ‰é’®

#### æœç´¢äº¤äº’

- æœç´¢æ¡†è¾“å…¥ â†’ 300ms debounce â†’ è§¦å‘æœç´¢è¯·æ±‚
- æœç´¢ç»“æœæ›¿æ¢åˆ—è¡¨å†…å®¹
- æ¸…ç©ºæœç´¢æ¡† â†’ æ˜¾ç¤ºé»˜è®¤åˆ—è¡¨ï¼ˆçƒ­é—¨/æœ€æ–°ï¼‰

#### åŠ è½½çŠ¶æ€

- åˆå§‹åŠ è½½: å±…ä¸­ loading spinner
- åŠ è½½æ›´å¤š: åˆ—è¡¨åº•éƒ¨ loading
- æœç´¢ä¸­: æœç´¢æ¡†å³ä¾§ loading indicator
- ç½‘ç»œé”™è¯¯: é”™è¯¯æç¤º + é‡è¯•æŒ‰é’®
- ç©ºç»“æœ: å‹å¥½æç¤ºæ–‡æ¡ˆ

### æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `src/lib/components/ai/MCPPanel.svelte` | ä¿®æ”¹ | æ–°å¢ marketplace tab åŠå¸‚åœºåˆ—è¡¨ UI |

---

## F3: ä¸€é”®å®‰è£… MCP Server

### éœ€æ±‚

ç”¨æˆ·åœ¨å¸‚åœºåˆ—è¡¨ç‚¹å‡»ã€Œå®‰è£…ã€æŒ‰é’®åï¼Œå¼¹å‡ºå®‰è£…å¯¹è¯é¢æ¿ï¼Œè‡ªåŠ¨å¡«å……æœåŠ¡å™¨é…ç½®ï¼Œç”¨æˆ·åªéœ€è¡¥å……å¿…è¦çš„ç¯å¢ƒå˜é‡ï¼ˆå¦‚ API Keyï¼‰ï¼Œå³å¯ä¸€é”®æ·»åŠ åˆ°æœ¬åœ° MCP æœåŠ¡å™¨åˆ—è¡¨ã€‚

### UI äº¤äº’

#### å®‰è£…æµç¨‹

```
ç‚¹å‡» [+ å®‰è£…] â†’ å±•å¼€å®‰è£…é¢æ¿ï¼ˆå¡ç‰‡å†…åµŒï¼‰
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ åç§°: Tavily Search       â”‚ â† è‡ªåŠ¨å¡«å……ï¼Œå¯ç¼–è¾‘
                â”‚ å‘½ä»¤: npx                 â”‚ â† è‡ªåŠ¨å¡«å……
                â”‚ å‚æ•°: -y tavily-mcp       â”‚ â† è‡ªåŠ¨å¡«å……
                â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
                â”‚ ç¯å¢ƒå˜é‡ï¼ˆå¿…å¡«ï¼‰:          â”‚
                â”‚ TAVILY_API_KEY: [_____]   â”‚ â† å¯†ç è¾“å…¥æ¡† (isSecret)
                â”‚                           â”‚
                â”‚   [ å–æ¶ˆ ]  [ å®‰è£…å¹¶è¿æ¥ ] â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å®‰è£…é€»è¾‘

1. ä» `MarketplaceServer.install` æå–é…ç½®ä¿¡æ¯
2. è‡ªåŠ¨ç”Ÿæˆ `MCPServerConfig`:
   - `id`: `mcp-{timestamp}`
   - `name`: `MarketplaceServer.name`
   - `transport`: æ ¹æ® `install.transport` å¡«å……
   - `enabled`: `true`
3. ç¯å¢ƒå˜é‡è¡¨å•ï¼š
   - æœ‰ `envVars` â†’ åŠ¨æ€æ¸²æŸ“è¾“å…¥æ¡†ï¼Œ`isSecret` ä¸º true æ—¶ç”¨ `type="password"`
   - æ—  `envVars` â†’ ä¸æ˜¾ç¤ºç¯å¢ƒå˜é‡åŒºåŸŸ
4. ç”¨æˆ·ç‚¹å‡»ã€Œå®‰è£…å¹¶è¿æ¥ã€:
   - è°ƒç”¨ `mcpStore.addServer(config)` æ·»åŠ åˆ°æœåŠ¡å™¨åˆ—è¡¨
   - è‡ªåŠ¨è°ƒç”¨ `connectServer(config)` è¿æ¥
   - å®‰è£…æˆåŠŸ â†’ åˆ‡æ¢åˆ°ã€ŒæœåŠ¡å™¨ã€tabï¼Œæ˜¾ç¤ºå·²è¿æ¥çŠ¶æ€
5. å®‰è£…å¤±è´¥ â†’ æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼Œä¿ç•™é…ç½®ä¾›ç”¨æˆ·ä¿®æ”¹

#### æ— å®‰è£…ä¿¡æ¯çš„é™çº§å¤„ç†

å½“ `install` å­—æ®µä¸ºç©ºæ—¶ï¼ˆå¦‚ Smithery çš„éƒ¨åˆ†æ¡ç›®ï¼‰ï¼š
- ã€Œå®‰è£…ã€æŒ‰é’®æ”¹ä¸ºã€ŒæŸ¥çœ‹è¯¦æƒ…ã€â†’ ç”¨å¤–éƒ¨æµè§ˆå™¨æ‰“å¼€ `homepage` URL
- æˆ–æ˜¾ç¤ºæ‰‹åŠ¨é…ç½®è¡¨å•ï¼ˆå¤ç”¨ç°æœ‰æ·»åŠ æœåŠ¡å™¨è¡¨å•ï¼‰

### æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `src/lib/components/ai/MCPPanel.svelte` | ä¿®æ”¹ | å®‰è£…é¢æ¿ UI + å®‰è£…é€»è¾‘ |

---

## F4: æ•°æ®æºåˆ‡æ¢è®¾ç½®

### éœ€æ±‚

ç”¨æˆ·å¯åœ¨å¸‚åœºé¡µé¢é¡¶éƒ¨åˆ‡æ¢æ•°æ®æºï¼Œé€‰æ‹©æŒä¹…åŒ–åˆ°æœ¬åœ°è®¾ç½®ä¸­ã€‚

### æ•°æ®æºé€‰é¡¹

| å€¼ | æ˜¾ç¤ºåç§° | è¯´æ˜ |
|----|---------|------|
| `official` | Official MCP Registry | Anthropic å®˜æ–¹ï¼Œé»˜è®¤é€‰é¡¹ |
| `lobehub` | LobeHub MCP | ä¸­å›½å›¢é˜Ÿï¼Œå›½å†…ç›´è¾¾ |
| `smithery` | Smithery | ç¤¾åŒºé©±åŠ¨ï¼Œè¯­ä¹‰æœç´¢ |

### æŒä¹…åŒ–

å¤ç”¨ `@tauri-apps/plugin-store`ï¼Œå­˜å‚¨åœ¨ `mcp-config.json`:

```typescript
// key: 'marketplaceSource'
// value: 'official' | 'lobehub' | 'smithery'
```

### æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `src/lib/services/mcp/marketplace.ts` | ä¿®æ”¹ | è¯»å–/ä¿å­˜æ•°æ®æºåå¥½ |
| `src/lib/components/ai/MCPPanel.svelte` | ä¿®æ”¹ | æ•°æ®æºä¸‹æ‹‰é€‰æ‹©å™¨ |

---

## F5: i18n å›½é™…åŒ–

### æ–°å¢ i18n Key

```json
{
  "mcp.marketplace.title": "MCP Market / MCP å¸‚åœº",
  "mcp.marketplace.search": "Search MCP servers... / æœç´¢ MCP æœåŠ¡...",
  "mcp.marketplace.source": "Source / æ•°æ®æº",
  "mcp.marketplace.install": "Install / å®‰è£…",
  "mcp.marketplace.installAndConnect": "Install & Connect / å®‰è£…å¹¶è¿æ¥",
  "mcp.marketplace.viewDetails": "View Details / æŸ¥çœ‹è¯¦æƒ…",
  "mcp.marketplace.installing": "Installing... / å®‰è£…ä¸­...",
  "mcp.marketplace.installed": "Installed / å·²å®‰è£…",
  "mcp.marketplace.loadMore": "Load More / åŠ è½½æ›´å¤š",
  "mcp.marketplace.noResults": "No MCP servers found / æœªæ‰¾åˆ° MCP æœåŠ¡",
  "mcp.marketplace.networkError": "Failed to load. Check your network. / åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ",
  "mcp.marketplace.retry": "Retry / é‡è¯•",
  "mcp.marketplace.envVars": "Environment Variables / ç¯å¢ƒå˜é‡",
  "mcp.marketplace.envRequired": "Required / å¿…å¡«",
  "mcp.marketplace.popularity": "uses / ä½¿ç”¨æ¬¡æ•°",
  "mcp.marketplace.verified": "Verified / å·²éªŒè¯",
  "mcp.marketplace.cancel": "Cancel / å–æ¶ˆ"
}
```

### æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `src/lib/i18n/locales/en.json` | ä¿®æ”¹ | è‹±æ–‡ç¿»è¯‘ |
| `src/lib/i18n/locales/zh-CN.json` | ä¿®æ”¹ | ä¸­æ–‡ç¿»è¯‘ |

---

## å®æ–½é¡ºåº

1. **F1** â†’ æ•°æ®æºæœåŠ¡å±‚ï¼ˆç±»å‹ + 3 ä¸ªé€‚é…å™¨ + ç»Ÿä¸€æ¥å£ï¼‰
2. **F5** â†’ i18n keysï¼ˆå…ˆå‡†å¤‡å¥½ï¼Œåç»­ UI ç›´æ¥å¼•ç”¨ï¼‰
3. **F2** â†’ å¸‚åœºæµè§ˆ UIï¼ˆtab + æœç´¢ + åˆ—è¡¨ + åˆ†é¡µï¼‰
4. **F3** â†’ ä¸€é”®å®‰è£…ï¼ˆå®‰è£…é¢æ¿ + ç¯å¢ƒå˜é‡è¡¨å• + è‡ªåŠ¨è¿æ¥ï¼‰
5. **F4** â†’ æ•°æ®æºåˆ‡æ¢æŒä¹…åŒ–

---

## æ–°å¢æ–‡ä»¶æ€»è§ˆ

| æ–‡ä»¶ | è¡Œæ•°ä¼°ç®— | è¯´æ˜ |
|------|---------|------|
| `src/lib/services/mcp/marketplace.ts` | ~250 | æ•°æ®æºæœåŠ¡ï¼ˆç±»å‹ + 3 é€‚é…å™¨ + ç»Ÿä¸€æ¥å£ + æŒä¹…åŒ–ï¼‰ |

## ä¿®æ”¹æ–‡ä»¶æ€»è§ˆ

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `src/lib/components/ai/MCPPanel.svelte` | æ–°å¢ marketplace tabã€å¸‚åœºåˆ—è¡¨ UIã€å®‰è£…é¢æ¿ |
| `src/lib/i18n/locales/en.json` | è‹±æ–‡ç¿»è¯‘ |
| `src/lib/i18n/locales/zh-CN.json` | ä¸­æ–‡ç¿»è¯‘ |

## ä¾èµ–å˜æ›´

**æ–°å¢ä¾èµ–**: æ— ï¼ˆä½¿ç”¨é¡¹ç›®å·²æœ‰çš„ `@tauri-apps/plugin-http` å‘èµ·è¯·æ±‚ï¼‰

---

## éªŒè¯æ–¹æ¡ˆ

1. **æ•°æ®æºåˆ‡æ¢**: åˆ†åˆ«é€‰æ‹© 3 ä¸ªæ•°æ®æº â†’ æœç´¢ç»“æœæ­£å¸¸è¿”å›
2. **æœç´¢åŠŸèƒ½**: è¾“å…¥å…³é”®è¯ï¼ˆå¦‚ "github"ï¼‰â†’ æœç´¢ç»“æœåˆ—è¡¨æ˜¾ç¤ºåŒ¹é…çš„ MCP æœåŠ¡
3. **ä¸€é”®å®‰è£…ï¼ˆnpm ç±»ï¼‰**: åœ¨ Official Registry æœç´¢ "tavily" â†’ ç‚¹å‡»å®‰è£… â†’ è‡ªåŠ¨å¡«å…… npx å‘½ä»¤å’Œå‚æ•° â†’ å¡«å†™ API Key â†’ å®‰è£…å¹¶è¿æ¥æˆåŠŸ
4. **ä¸€é”®å®‰è£…ï¼ˆremote ç±»ï¼‰**: åœ¨ Smithery æœç´¢ â†’ ç‚¹å‡»å®‰è£… â†’ è‡ªåŠ¨å¡«å…… HTTP endpoint
5. **å·²å®‰è£…æ£€æµ‹**: å·²æ·»åŠ çš„ MCP æœåŠ¡å™¨åœ¨å¸‚åœºåˆ—è¡¨ä¸­æ˜¾ç¤ºã€Œå·²å®‰è£…ã€çŠ¶æ€
6. **ç½‘ç»œé”™è¯¯**: æ–­ç½‘åæœç´¢ â†’ æ˜¾ç¤ºé”™è¯¯æç¤º + é‡è¯•æŒ‰é’®
7. **ç©ºç»“æœ**: æœç´¢ä¸å­˜åœ¨çš„å…³é”®è¯ â†’ æ˜¾ç¤ºå‹å¥½ç©ºçŠ¶æ€æç¤º
8. **æ•°æ®æºæŒä¹…åŒ–**: åˆ‡æ¢æ•°æ®æºåé‡å¯åº”ç”¨ â†’ ä¿æŒä¸Šæ¬¡é€‰æ‹©
9. **å›½é™…åŒ–**: åˆ‡æ¢è¯­è¨€ â†’ æ‰€æœ‰å¸‚åœºé¡µé¢æ–‡æ¡ˆæ­£ç¡®æ˜¾ç¤ºä¸­/è‹±æ–‡
10. **`pnpm check`**: 0 errors
