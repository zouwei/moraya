# v0.15.0 AI è¯­éŸ³å®æ—¶è½¬å½•

**ç‰ˆæœ¬ï¼š** v0.15.0
**çŠ¶æ€ï¼š** å·²å®Œæˆ
**æ—¥æœŸï¼š** 2026-02-25

---

## èƒŒæ™¯ä¸ç›®æ ‡

å½“å‰ Moraya çš„ AI èƒ½åŠ›é›†ä¸­äºæ–‡æœ¬å¯¹è¯ä¸å›¾åƒç”Ÿæˆã€‚v0.15.0 å¼•å…¥ **AI è¯­éŸ³å®æ—¶è½¬å½•**åŠŸèƒ½ï¼Œæ”¯æŒï¼š

- å®æ—¶éº¦å…‹é£é‡‡é›† â†’ äº‘ç«¯è¯­éŸ³è½¬æ–‡å­—ï¼ˆSTTï¼‰â†’ è¯´è¯äººè‡ªåŠ¨è¯†åˆ«ä¸å‘½å
- å¤šåœºæ™¯è¦†ç›–ï¼šä¼šè®®è®°å½•ã€è¯¾å ‚ç¬”è®°ã€è®¿è°ˆå¯¹è¯ã€å¤´è„‘é£æš´
- è½¬å½•å®Œæˆåä¸€é”®å‘é€ LLM ç”Ÿæˆä¼šè®®æ‘˜è¦ï¼Œä¿å­˜ä¸º Markdown æ–‡æ¡£

å·®å¼‚åŒ–ä¼˜åŠ¿ï¼šæœ¬åœ°ä¼˜å…ˆ + å£°çº¹éšç§ä¿æŠ¤ + æ— ç¼èå…¥ç°æœ‰ AI å¯¹è¯å·¥ä½œæµã€‚

---

## æŠ€æœ¯æ–¹æ¡ˆï¼šè¯­éŸ³ STT Provider å…¨è§ˆ

### æµå¼æ”¯æŒç­›æŸ¥

å®æ—¶è½¬å½•è¦æ±‚ WebSocket æµå¼ä¼ è¾“ã€‚ä»¥ä¸‹ä¸ºç­›æŸ¥ç»“æœï¼š

| Provider | æµå¼åè®® | å¯ç”¨äºå®æ—¶ | æ’é™¤åŸå›  |
|----------|---------|-----------|---------|
| **Deepgram** | WebSocket | âœ… æ”¯æŒ | â€” |
| **Gladia** | WebSocket | âœ… æ”¯æŒ | â€” |
| **AssemblyAI** | WebSocket | âœ… æ”¯æŒ | â€” |
| **Azure Speech** | WebSocket | âœ… æ”¯æŒ | â€” |
| **AWS Transcribe** | WebSocket | âœ… æ”¯æŒ | â€” |
| ~~**Google Chirp**~~ | ~~gRPC only~~ | âŒ **æ’é™¤** | Chirp ä¸ºæ‰¹å¤„ç†ä¼˜å…ˆæ¨¡å‹ï¼Œæµå¼éœ€ gRPC åè®®ï¼ŒRust ç«¯éœ€å¼•å…¥ `tonic` + protobufï¼ˆ+1MB+ åŒ…å¤§å°ï¼‰ï¼Œä¸å…¶ä»– provider æ¶æ„ä¸å…¼å®¹ |

**æœ€ç»ˆæ”¯æŒ 5 å®¶ WebSocket å®æ—¶ Providerï¼š** Deepgramã€Gladiaã€AssemblyAIã€Azure Speechã€AWS Transcribe

---

### Provider æ¨ªå‘å¯¹æ¯”ï¼ˆä»… WebSocket å®æ—¶æµå¼ï¼‰

| Provider | å®æ—¶å»¶è¿Ÿ | è¯´è¯äººè¯†åˆ« | è¯­è¨€æ•° | ä»·æ ¼/åˆ†é’Ÿ | è®¤è¯æ–¹å¼ | å®ç°éš¾åº¦ |
|----------|---------|-----------|--------|----------|---------|---------|
| **Deepgram** | ~300ms | âœ… 10+ äºº | 36 | $0.0059 | Bearer Token | â­ ä½ |
| **Gladia** | ~400ms | âœ… å¤šäºº | 99+ | $0.0102 | x-gladia-key | â­ ä½ |
| **AssemblyAI** | ~500ms | âš ï¸ æµå¼ 2 äºº | 99 | $0.0100 | Bearer Token | â­ ä½ |
| **Azure Speech** | ~300ms | âœ… å¤šäºº | 100+ | $0.0160 | Ocp-Apim-Key | â­â­ ä¸­ |
| **AWS Transcribe** | ~500ms | âœ… å¤šäºº | 100+ | $0.0240 | SigV4 ç­¾å | â­â­â­ é«˜ |

**æ¨èä¼˜å…ˆçº§ï¼š** Deepgramï¼ˆä¸»åŠ›ï¼‰â†’ Gladiaï¼ˆå¤šè¯­è¨€å¤‡é€‰ï¼‰â†’ AssemblyAI â†’ Azure Speech â†’ AWS Transcribe

æ‰€æœ‰ provider å‡ä¸æ”¯æŒè·¨ä¼šè¯å£°çº¹è¯†åˆ«ï¼ŒMoraya è‡ªè¡Œå®ç°å£°çº¹æ¡£æ¡ˆæœºåˆ¶ï¼ˆè§ F3/F4ï¼‰ã€‚

---

### å„ Provider è¯¦æƒ…

#### Deepgramï¼ˆæ¨èä¸»åŠ›ï¼‰

| ç»´åº¦ | è¯¦æƒ… |
|------|------|
| **å®æ—¶èƒ½åŠ›** | WebSocket æµå¼ï¼Œå»¶è¿Ÿçº¦ 300ms |
| **è¯´è¯äººè¯†åˆ«** | `diarize=true`ï¼Œæ”¯æŒ 10+ è¯´è¯äºº |
| **è¯­è¨€** | 36 ç§ï¼ˆè‹±ã€ä¸­ã€æ—¥ã€éŸ©ã€æ³•ã€å¾·ç­‰ï¼‰ |
| **æ¨¡å‹** | `nova-3`ã€`nova-2`ã€`nova`ã€`enhanced`ã€`base` |
| **ä»·æ ¼** | $0.0059/åˆ†é’Ÿï¼ˆnova-2ï¼Œæµå¼ï¼‰ |
| **WebSocket** | `wss://api.deepgram.com/v1/listen` |
| **è®¤è¯** | `Authorization: Token {apiKey}` |
| **ç‰¹ç‚¹** | å»¶è¿Ÿæœ€ä½ã€ä»·æ ¼æœ€ä¼˜ã€ä¸­æ–‡è´¨é‡å¥½ |

#### Gladiaï¼ˆå¤šè¯­è¨€é¦–é€‰ï¼‰

| ç»´åº¦ | è¯¦æƒ… |
|------|------|
| **å®æ—¶èƒ½åŠ›** | WebSocket æµå¼ï¼Œå»¶è¿Ÿçº¦ 400ms |
| **è¯´è¯äººè¯†åˆ«** | âœ… å¤šè¯´è¯äºº diarization |
| **è¯­è¨€** | 99+ ç§ï¼ˆè¦†ç›–æœ€å¹¿ï¼‰ |
| **æ¨¡å‹** | `solaria-1`ï¼ˆæœ€æ–°ï¼‰ã€`fast`ã€`accurate` |
| **ä»·æ ¼** | $0.0102/åˆ†é’Ÿï¼ˆå®æ—¶ï¼‰ |
| **WebSocket** | `wss://api.gladia.io/audio/text/audio-transcription` |
| **è®¤è¯** | `x-gladia-key: {apiKey}` |
| **ç‰¹ç‚¹** | è¯­è¨€è¦†ç›–æœ€å¹¿ï¼Œå«ç½•è§è¯­ç§ï¼Œæ¥å…¥ç®€å• |

#### AssemblyAIï¼ˆæ‰¹å¤„ç†è§é•¿ï¼‰

| ç»´åº¦ | è¯¦æƒ… |
|------|------|
| **å®æ—¶èƒ½åŠ›** | WebSocket æµå¼ï¼Œå»¶è¿Ÿçº¦ 500ms |
| **è¯´è¯äººè¯†åˆ«** | âš ï¸ æµå¼æœ€å¤š 2 äººï¼›æ‰¹å¤„ç†æ— é™åˆ¶ |
| **è¯­è¨€** | 99 ç§ |
| **æ¨¡å‹** | `best`ã€`nano` |
| **ä»·æ ¼** | $0.0100/åˆ†é’Ÿï¼ˆå®æ—¶ï¼‰ã€$0.0065/åˆ†é’Ÿï¼ˆæ‰¹å¤„ç†ï¼‰|
| **WebSocket** | `wss://api.assemblyai.com/v2/realtime/ws` |
| **è®¤è¯** | `Authorization: {apiKey}` |
| **ç‰¹ç‚¹** | å†…ç½® LeMURï¼ˆAI æ‘˜è¦ï¼‰ï¼Œæ‰¹å¤„ç†è´¨é‡é«˜ |

#### Azure Speech Services

| ç»´åº¦ | è¯¦æƒ… |
|------|------|
| **å®æ—¶èƒ½åŠ›** | WebSocket æµå¼ï¼Œå»¶è¿Ÿçº¦ 300ms |
| **è¯´è¯äººè¯†åˆ«** | âœ… å¤šäººï¼ˆConversation Transcription æœåŠ¡ï¼‰ |
| **è¯­è¨€** | 100+ ç§ï¼ˆå«ç²¤è¯­ã€å°æ¹¾æ™®é€šè¯ç­‰æ–¹è¨€ï¼‰ |
| **æ¨¡å‹** | `latest`ï¼ˆé€šç”¨ï¼‰ã€å„è¯­è¨€ä¸“ç”¨ç¥ç»ç½‘ç»œæ¨¡å‹ |
| **ä»·æ ¼** | $0.0160/åˆ†é’Ÿï¼ˆæ ‡å‡†å®æ—¶ï¼‰ |
| **WebSocket** | `wss://{region}.stt.speech.microsoft.com/speech/recognition/...` |
| **è®¤è¯** | `Ocp-Apim-Subscription-Key: {apiKey}` |
| **é…ç½®é¡¹** | éœ€é¢å¤–è®¾ç½® `region`ï¼ˆå¦‚ `eastasia`ã€`westus2`ï¼‰|
| **ç‰¹ç‚¹** | å¾®è½¯äº‘ï¼Œä¼ä¸šåˆè§„æ€§å¼ºï¼Œæ–¹è¨€æ”¯æŒå¥½ |

#### AWS Transcribe

| ç»´åº¦ | è¯¦æƒ… |
|------|------|
| **å®æ—¶èƒ½åŠ›** | WebSocket æµå¼ï¼Œå»¶è¿Ÿçº¦ 500ms |
| **è¯´è¯äººè¯†åˆ«** | âœ… `ShowSpeakerLabel=true` |
| **è¯­è¨€** | 100+ ç§ |
| **æ¨¡å‹** | `general`ã€`medical`ï¼ˆåŒ»ç–—ä¸“ç”¨ï¼‰ã€`call-center` |
| **ä»·æ ¼** | $0.0240/åˆ†é’Ÿï¼ˆå®æ—¶æµå¼ï¼Œæœ€è´µï¼‰|
| **WebSocket** | `wss://transcribestreaming.{region}.amazonaws.com:8443` |
| **è®¤è¯** | AWS Signature V4ï¼ˆéœ€ AccessKey + SecretKey + Regionï¼‰ |
| **é…ç½®é¡¹** | `region`ã€`accessKey`ï¼ˆKeychain å­˜å‚¨ï¼‰ã€`secretKey`ï¼ˆKeychain å­˜å‚¨ï¼‰ |
| **ç‰¹ç‚¹** | AWS ç”Ÿæ€æ·±åº¦é›†æˆï¼›SigV4 ç­¾åå¤æ‚ï¼ŒRust åç«¯å·²æœ‰ hmac/sha2 å¯å¤ç”¨ |

---

### åŒ…å¤§å°å½±å“

æ–°å¢ Rust ä¾èµ– `tokio-tungstenite`ï¼ˆWebSocket å®¢æˆ·ç«¯ï¼‰ï¼Œçº¦ +200-300KB ç¼–è¯‘äº§ç‰©ï¼›
å®‰è£…åŒ…çº¦å¢åŠ  100-150KBã€‚å‰ç«¯æ— æ–° npm ä¾èµ–ï¼Œä¸å½±å“ JS bundleã€‚

> AWS Transcribe çš„ SigV4 ç­¾åå¤ç”¨ `src-tauri/src/commands/object_storage.rs` ä¸­å·²æœ‰çš„ hmac/sha2 ä¾èµ–ï¼Œæ— é¢å¤–åŒ…å¤§å°å¢åŠ ã€‚

---

## F1ï¼šè¯­éŸ³ AI Provider é…ç½®

### æ–°ç±»å‹ï¼ˆ`src/lib/services/ai/types.ts`ï¼‰

```typescript
// Google Cloud STT (Chirp) å·²æ’é™¤ï¼šæ‰¹å¤„ç†ä¼˜å…ˆï¼Œæµå¼éœ€ gRPCï¼Œä¸ WebSocket æ¶æ„ä¸å…¼å®¹
export type SpeechProvider =
  | 'deepgram'
  | 'gladia'
  | 'assemblyai'
  | 'azure-speech'
  | 'aws-transcribe'
  | 'custom';

export interface SpeechProviderConfig {
  id: string;
  provider: SpeechProvider;
  apiKey: string;        // keychain: 'speech-key:{id}'ï¼Œç£ç›˜å­˜ '***'
  baseUrl?: string;      // è‡ªå®šä¹‰ WebSocket ç«¯ç‚¹ï¼ˆcustom ç”¨ï¼‰
  model: string;         // è§ SPEECH_PROVIDER_MODELS
  language: string;      // 'zh', 'en', 'auto', 'multi' ç­‰
  region?: string;       // Azure / AWS éœ€è¦ï¼ˆå¦‚ 'eastasia', 'us-east-1'ï¼‰
  // AWS Transcribe ä¸“ç”¨ï¼ˆKeychain å­˜å‚¨ï¼‰
  awsAccessKey?: string; // keychain: 'speech-aws-ak:{id}'
  awsSecretKey?: string; // keychain: 'speech-aws-sk:{id}'
}

export const SPEECH_PROVIDER_MODELS: Record<SpeechProvider, string[]> = {
  deepgram:        ['nova-3', 'nova-2', 'nova', 'enhanced', 'base'],
  gladia:          ['solaria-1', 'fast', 'accurate'],
  assemblyai:      ['best', 'nano'],
  'azure-speech':  ['latest'],             // Azure æŒ‰è¯­è¨€è‡ªåŠ¨é€‰æ‹©ç¥ç»ç½‘ç»œæ¨¡å‹
  'aws-transcribe':['general', 'medical', 'call-center'],
  custom:          [],
};

export const SPEECH_PROVIDER_BASE_URLS: Record<SpeechProvider, string> = {
  deepgram:        'wss://api.deepgram.com',
  gladia:          'wss://api.gladia.io',
  assemblyai:      'wss://api.assemblyai.com',
  'azure-speech':  'wss://{region}.stt.speech.microsoft.com',
  'aws-transcribe':'wss://transcribestreaming.{region}.amazonaws.com:8443',
  custom:          '',
};

// Provider æ˜¾ç¤ºåç§°
export const SPEECH_PROVIDER_NAMES: Record<SpeechProvider, string> = {
  deepgram:        'Deepgram',
  gladia:          'Gladia',
  assemblyai:      'AssemblyAI',
  'azure-speech':  'Azure Speech',
  'aws-transcribe':'AWS Transcribe',
  custom:          'Custom',
};
```

### è®¾ç½® Tab "è¯­éŸ³"ï¼ˆ`src/lib/components/SettingsPanel.svelte`ï¼‰

åœ¨ç°æœ‰ 8 ä¸ª Tab åæ–°å¢ï¼š

```typescript
{ key: 'voice', icon: 'ğŸ¤', labelKey: 'settings.tabs.voice' }
```

### è¯­éŸ³è®¾ç½®é¡µé¢ï¼ˆ`src/lib/components/VoiceSettings.svelte`ï¼Œæ–°å»ºï¼‰

**æ•ˆæœå›¾ï¼š**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¯­éŸ³                                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  è¯­éŸ³è½¬å½• Provider                                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â— Deepgram              nova-2 Â· zh Â· âœ“ å·²è¿æ¥           â”‚  â”‚
â”‚  â”‚  API Key  â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢abc              [æµ‹è¯•è¿æ¥]â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [ç¼–è¾‘] [åˆ é™¤] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â—‹ Azure Speech          latest Â· zh-CN Â· æœªæµ‹è¯•          â”‚  â”‚
â”‚  â”‚  API Key  â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢xyz   åœ°åŸŸ eastasia [æµ‹è¯•] â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [ç¼–è¾‘] [åˆ é™¤] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€ æ·»åŠ  Provider â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Deepgram  Gladia  AssemblyAI                             â”‚  â”‚
â”‚  â”‚  Azure Speech  AWS Transcribe  è‡ªå®šä¹‰                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  [+ æ·»åŠ è¯­éŸ³ Provider â–¾]                                         â”‚
â”‚                                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  å£°çº¹æ¡£æ¡ˆ                                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸŸ¦       â”‚  å¼ æ€»                          ç”·1å·         â”‚    â”‚
â”‚  â”‚          â”‚  æ ·æœ¬æ—¶é•¿ï¼š14.8s               [â–¶ è¯•å¬]      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [ä¿®æ”¹æ˜µç§°] [åˆ é™¤] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸŸ©       â”‚  æå·¥                          å¥³1å·         â”‚    â”‚
â”‚  â”‚          â”‚  æ ·æœ¬æ—¶é•¿ï¼š15.0s               [â–¶ è¯•å¬]      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [ä¿®æ”¹æ˜µç§°] [åˆ é™¤] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸŸ§       â”‚  ç‹æ€»                          ç”·2å·         â”‚    â”‚
â”‚  â”‚          â”‚  æ ·æœ¬æ—¶é•¿ï¼š12.3s               [â–¶ è¯•å¬]      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [ä¿®æ”¹æ˜µç§°] [åˆ é™¤] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  å­˜å‚¨ä¸åŒæ­¥                                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  å£°çº¹æ ·æœ¬å­˜å‚¨ç›®å½•                                                â”‚
â”‚  [~/Library/Application Support/com.moraya.app/voiâ€¦] [é€‰æ‹©ç›®å½•] â”‚
â”‚                                                                  â”‚
â”‚  åŒæ­¥æ–‡ä»¶å¤¹ï¼ˆå¯é€‰ï¼ŒæŒ‡å‘ iCloud/Dropbox ç­‰äº‘ç›˜ç›®å½•å®ç°è·¨è®¾å¤‡åŒæ­¥ï¼‰â”‚
â”‚  [æœªè®¾ç½®                                            ] [é€‰æ‹©ç›®å½•] â”‚
â”‚                                                                  â”‚
â”‚  å½•éŸ³å¤‡ä»½ç›®å½•ï¼ˆå¯é€‰ï¼Œå…³é—­åˆ™ä¸ä¿å­˜å½•éŸ³åŸæ–‡ä»¶ï¼‰                    â”‚
â”‚  [æœªè®¾ç½®                                            ] [é€‰æ‹©ç›®å½•] â”‚
â”‚                                                                  â”‚
â”‚  [â†‘ å¯¼å‡ºå£°çº¹æ¡£æ¡ˆ ZIP]   [â†“ å¯¼å…¥å£°çº¹æ¡£æ¡ˆ ZIP]                    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åŠŸèƒ½è¯´æ˜ï¼š**
- Provider å¤šé…ç½®ç®¡ç†ï¼ˆåŒ AI/å›¾åºŠçš„å¡ç‰‡åˆ—è¡¨æ¨¡å¼ï¼‰
- API Key å­˜ Keychainï¼ˆå‰ç¼€ `speech-key:{id}`ï¼‰ï¼Œç•Œé¢æ˜¾ç¤ºæœ« 3 ä½è„±æ•
- æµ‹è¯•è¿æ¥ï¼šå‘é€ 2s ç©ºç™½éŸ³é¢‘å—ï¼ŒéªŒè¯ WebSocket æ¡æ‰‹æˆåŠŸ
- è¯­è¨€é€‰æ‹©ä¸‹æ‹‰ï¼ˆ`auto`/`zh`/`en`/`multi`ï¼‰
- æ¨¡å‹é€‰æ‹©ä¸‹æ‹‰ï¼ˆå¸¦é¢„è®¾ + è‡ªå®šä¹‰æ–‡æœ¬è¾“å…¥ï¼‰
- å£°çº¹æ¡£æ¡ˆåˆ—è¡¨ï¼šè‰²å—å¤´åƒ + æ˜µç§° + è‡ªåŠ¨åç§° + æ ·æœ¬æ—¶é•¿ + è¯•å¬
- å­˜å‚¨ä¸åŒæ­¥ï¼šä¸‰ä¸ªç›®å½•è·¯å¾„è®¾ç½® + å¯¼å‡º/å¯¼å…¥ ZIP

---

## F2ï¼šå®æ—¶è½¬å½•æ ¸å¿ƒï¼ˆRust WebSocket ä»£ç†ï¼‰

### æ¶æ„æ•°æ®æµ

```
éº¦å…‹é£ (getUserMedia + AudioWorklet)
  â”‚  PCM 16kHz/16bit éŸ³é¢‘å—ï¼ˆæ¯ 250ms ä¸€æ‰¹ï¼‰
  â–¼
Rust å‘½ä»¤ speech_proxy_send_audio(session_id, audio_bytes)
  â”‚  Tauri IPCï¼ˆäºŒè¿›åˆ¶ï¼‰
  â–¼
tokio-tungstenite WebSocket è¿æ¥ â†’ Deepgram/AssemblyAI
  â”‚  Binary frame å‘é€
  â–¼
STT æœåŠ¡è¿”å› JSONï¼ˆtranscript + speaker_id + confidenceï¼‰
  â–¼
Rust è§£æ â†’ ä»…è½¬å‘å¿…è¦å­—æ®µ
  â”‚  Tauri Channelï¼ˆonEventï¼‰
  â–¼
å‰ç«¯ TranscriptionPanel å®æ—¶è¿½åŠ é€å¥æ–‡å­—
```

### Rust æ–°å‘½ä»¤æ¨¡å—ï¼ˆ`src-tauri/src/commands/speech_proxy.rs`ï¼Œæ–°å»ºï¼‰

```rust
#[tauri::command]
pub async fn speech_proxy_start(
    state: State<'_, SpeechProxyState>,
    on_event: Channel<SpeechEvent>,
    config_id: String,
    language: String,
    model: String,
) -> Result<String, String>  // è¿”å› session_id

#[tauri::command]
pub async fn speech_proxy_send_audio(
    state: State<'_, SpeechProxyState>,
    session_id: String,
    audio_bytes: Vec<u8>,
) -> Result<(), String>

#[tauri::command]
pub async fn speech_proxy_stop(
    state: State<'_, SpeechProxyState>,
    session_id: String,
) -> Result<(), String>
```

### Rust Cargo.toml æ–°å¢ä¾èµ–

```toml
tokio-tungstenite = { version = "0.24", features = ["native-tls"] }
```

### å‰ç«¯æœåŠ¡ï¼ˆ`src/lib/services/voice/speech-service.ts`ï¼Œæ–°å»ºï¼‰

```typescript
export interface TranscriptSegment {
  speakerId: string;      // 'SPEAKER_0', 'SPEAKER_1'
  profileId?: string;     // åŒ¹é…åˆ°çš„ VoiceProfile.id
  displayName: string;    // 'ç”·1å·', 'å¼ æ€»', 'è·¯äºº338'
  text: string;
  startMs: number;
  endMs: number;
  confidence: number;
}

export async function startTranscription(config: SpeechProviderConfig): Promise<string>
export async function sendAudioChunk(sessionId: string, chunk: ArrayBuffer): Promise<void>
export async function stopTranscription(sessionId: string): Promise<TranscriptSegment[]>
```

---

## F3ï¼šè¯´è¯äººè¯†åˆ«ä¸è‡ªåŠ¨å‘½å

### ä¼šè¯å†…è¯´è¯äººå‘½åè§„åˆ™

1. Deepgram è¿”å› `SPEAKER_0`ã€`SPEAKER_1` ç­‰ä¼šè¯å†… ID
2. å¯¹æ¯ä¸ªè¯´è¯äººçš„éŸ³é¢‘ï¼Œç”¨ Web Audio API `AnalyserNode` åˆ†æåŸºé¢‘ï¼ˆF0ï¼‰
   - F0 < 165Hz â†’ æ¨æ–­ç”·æ€§ â†’ å‘½å"ç”·Nå·"ï¼ˆN æŒ‰å‡ºåœºé¡ºåºï¼‰
   - F0 â‰¥ 165Hz â†’ æ¨æ–­å¥³æ€§ â†’ å‘½å"å¥³Nå·"
3. ä¼šè¯å†…è¯´è¯æ—¶é•¿ < 30 ç§’çš„è¯´è¯äºº â†’ å‘½å"è·¯äºº{3ä½éšæœºæ•°å­—}"
4. è‹¥å·²æœ‰å£°çº¹æ¡£æ¡ˆåŒ¹é…ï¼Œä½¿ç”¨æ¡£æ¡ˆä¸­çš„æ˜µç§°è¦†ç›–è‡ªåŠ¨åç§°

### è·¨ä¼šè¯å£°çº¹åŒ¹é…

ä¼šè¯ç»“æŸåè‡ªåŠ¨æå–æ¯ä¸ªä¸»è¦è¯´è¯äºº â‰ˆ15s éŸ³é¢‘ç‰‡æ®µï¼Œå­˜ä¸ºæœ¬åœ°å£°çº¹æ ·æœ¬æ–‡ä»¶ã€‚
ä¸‹æ¬¡ä¼šè¯å¼€å§‹æ—¶ï¼Œå¯¹æ–°å‡ºç°çš„è¯´è¯äººéŸ³é¢‘ä¸å·²æœ‰æ ·æœ¬åšç›¸ä¼¼åº¦æ¯”è¾ƒï¼ˆä½™å¼¦ç›¸ä¼¼åº¦ï¼‰ï¼š

```typescript
// å£°çº¹ç‰¹å¾ä½¿ç”¨ MFCCï¼ˆæ¢…å°”é¢‘ç‡å€’è°±ç³»æ•°ï¼‰ï¼Œåœ¨ AudioWorklet å†…è®¡ç®—
// ç›¸ä¼¼åº¦ > 0.85 â†’ è§†ä¸ºåŒä¸€äººï¼Œä½¿ç”¨å·²æœ‰æ¡£æ¡ˆæ˜µç§°
```

> å£°çº¹åŒ¹é…ç²¾åº¦çº¦ 80-90%ï¼Œå±äºè¾…åŠ©è¯†åˆ«ã€‚ç”¨æˆ·å¯æ‰‹åŠ¨ä¿®æ­£æ¡£æ¡ˆã€‚

---

## F4ï¼šå£°çº¹æ¡£æ¡ˆç®¡ç†

### æ•°æ®ç±»å‹ï¼ˆ`src/lib/services/voice/types.ts`ï¼Œæ–°å»ºï¼‰

```typescript
export interface VoiceProfile {
  id: string;
  nickname: string;          // ç”¨æˆ·è‡ªå®šä¹‰æ˜µç§°ï¼šå¦‚"å¼ æ€»"
  autoName: string;          // è‡ªåŠ¨åç§°ï¼šå¦‚"ç”·1å·"
  gender: 'male' | 'female' | 'unknown';
  samplePath: string;        // æœ¬åœ°éŸ³é¢‘æ ·æœ¬æ–‡ä»¶ç»å¯¹è·¯å¾„
  sampleDurationMs: number;
  color: string;             // è½¬å½•æ–‡å­—é¢œè‰²ï¼ˆåå…­è¿›åˆ¶ï¼‰
  createdAt: number;
  updatedAt: number;
}
```

### å­˜å‚¨è·¯å¾„

```
é»˜è®¤ï¼š{appDataDir}/voice-profiles/
  â”œâ”€â”€ index.json          â† VoiceProfile[] æ•°ç»„ï¼ˆæ˜µç§°ã€é¢œè‰²ç­‰å…ƒæ•°æ®ï¼‰
  â””â”€â”€ {profileId}/
      â””â”€â”€ sample.wav      â† 15s å£°çº¹æ ·æœ¬

åŒæ­¥æ–‡ä»¶å¤¹ï¼ˆå¯é€‰ï¼Œç”¨æˆ·åœ¨è®¾ç½®ä¸­æŒ‡å®šï¼‰ï¼š
  å¦‚ ~/Library/Mobile Documents/com~apple~CloudDocs/Moraya/voice-profiles/
  App è¯»å†™æ­¤ç›®å½•ï¼Œäº‘ç›˜è‡ªåŠ¨åŒæ­¥è‡³å…¶ä»–è®¾å¤‡
```

### å£°çº¹åŒæ­¥æ–¹æ¡ˆï¼ˆA+B ç»„åˆï¼‰

- **é»˜è®¤**ï¼šè¯»å†™ `{appDataDir}/voice-profiles/`ï¼ˆéšç§ä¿æŠ¤ï¼Œå®Œå…¨æœ¬åœ°ï¼‰
- **å¯é€‰**ï¼šåœ¨"è¯­éŸ³"è®¾ç½® Tab ä¸­æŒ‡å®šåŒæ­¥æ–‡ä»¶å¤¹ï¼ŒApp æ”¹ä¸ºè¯»å†™æ­¤ç›®å½•
- **æ‰‹åŠ¨è¿ç§»**ï¼šä¸€é”®å¯¼å‡º `moraya-voice-profiles-{date}.zip`ï¼Œå¦ä¸€å°è®¾å¤‡å¯¼å…¥

### å£°çº¹æ¡£æ¡ˆç®¡ç† UIï¼ˆ`VoiceSettings.svelte` å†…åµŒåŒºåŸŸï¼‰

- æ¡£æ¡ˆåˆ—è¡¨ï¼šè‰²å—å¤´åƒ + æ˜µç§° + è‡ªåŠ¨å + æ ·æœ¬æ—¶é•¿
- æ“ä½œï¼šè¯•å¬æ ·æœ¬ Â· ä¿®æ”¹æ˜µç§° Â· åˆ é™¤æ¡£æ¡ˆ
- åº•éƒ¨ï¼šå¯¼å‡º ZIP / å¯¼å…¥ ZIP / è®¾ç½®åŒæ­¥æ–‡ä»¶å¤¹

---

## F5ï¼šå®æ—¶è½¬å½•é¢æ¿ UI

### å…¥å£è®¾è®¡ï¼ˆ`src/lib/components/ai/AIChatPanel.svelte` æ”¹åŠ¨ï¼‰

AI è¾“å…¥æ¡†**æœ€å·¦ä¾§**æ–°å¢ **"+" å›¾æ ‡æŒ‰é’®**ï¼Œç‚¹å‡»ååœ¨ input åŒºåŸŸ**ä¸Šæ–¹**å¼¹å‡ºåŠŸèƒ½æŠ½å±‰èœå•ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤  AI å½•éŸ³å®æ—¶è½¬å½•     â”‚
â”‚  ï¼ˆé¢„ç•™æ›´å¤šåŠŸèƒ½æ‰©å±•ï¼‰    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â†‘ å‘ä¸Šå¼¹å‡ºï¼Œå·¦å¯¹é½ [+] æŒ‰é’®

[+] [è¾“å…¥æ¡†                                        ] [å‘é€]
```

- "+" æŒ‰é’®ä½äºè¾“å…¥æ¡†**æœ€å·¦ä¾§**ï¼Œä¸å‘é€æŒ‰é’®åœ¨è¾“å…¥è¡Œä¸¤ç«¯å¯¹ç§°
- æŠ½å±‰èœå•å‘ä¸Šå¼¹å‡ºï¼Œå·¦è¾¹ç¼˜ä¸ "+" æŒ‰é’®å¯¹é½
- æŠ½å±‰ä½¿ç”¨ CSS `position: absolute; bottom: 100%` å®šä½æµ®å±‚ï¼Œç‚¹å‡»å¤–éƒ¨å…³é—­
- å½“å‰ä»…ä¸€ä¸ªåŠŸèƒ½å…¥å£ï¼Œé¢„ç•™æ‰©å±•æ’æ§½

### è½¬å½•è§†å›¾ï¼ˆ`src/lib/components/TranscriptionPanel.svelte`ï¼Œæ–°å»ºï¼‰

ç‚¹å‡»"AI å½•éŸ³å®æ—¶è½¬å½•"åï¼ŒAI èŠå¤©é¢æ¿å†…å®¹åŒºåŸŸåˆ‡æ¢ä¸ºè½¬å½•è§†å›¾ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â— å½•éŸ³ä¸­  00:12:34     [åœæ­¢] [æš‚åœ] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸŸ¦ ç”·1å· (00:00)                     â”‚
â”‚   å¤§å®¶å¥½ï¼Œä»Šå¤©æˆ‘ä»¬è®¨è®ºä¸€ä¸‹äº§å“è§„åˆ’ã€‚ â”‚
â”‚                                      â”‚
â”‚ ğŸŸ© å¥³1å· (00:05)                     â”‚
â”‚   å¥½çš„ï¼Œæˆ‘å…ˆè¯´ä¸€ä¸‹ç”¨æˆ·åé¦ˆçš„æƒ…å†µã€‚  â”‚
â”‚                                      â”‚
â”‚ ğŸŸ¦ ç”·1å· (00:18)                     â”‚
â”‚   å—¯ï¼Œæˆ‘ä¹Ÿæœ‰å‡ ç‚¹è¡¥å……...              â”‚
â”‚                    â†• è‡ªåŠ¨æ»šåŠ¨         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ç”Ÿæˆä¼šè®®æ‘˜è¦ â†’AI]  [ä¿å­˜ä¸ºæ–‡æ¡£]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- æ¯æ¡è½¬å½•ï¼šè‰²å—å›¾æ ‡ + è¯´è¯äººåç§° + æ—¶é—´æˆ³ + æ–‡å­—
- é€å¥è¿½åŠ ï¼ˆè¯´è¯äººåœé¡¿åæ•´å¥æ˜¾ç¤ºï¼‰
- å½•éŸ³è¿‡ç¨‹ä¸­è‡ªåŠ¨æ»šåŠ¨åˆ°æœ€æ–°
- åº•éƒ¨æ“ä½œæ ï¼š
  - **ç”Ÿæˆä¼šè®®æ‘˜è¦ â†’AI**ï¼šå°†å…¨æ–‡è½¬å½•å‘é€åˆ° LLM èŠå¤©ï¼Œåˆ‡æ¢å›å¯¹è¯è§†å›¾
  - **ä¿å­˜ä¸ºæ–‡æ¡£**ï¼šå°†è½¬å½•å†…å®¹æ ¼å¼åŒ–ä¸º Markdownï¼Œæ’å…¥ç¼–è¾‘å™¨æˆ–æ–°å»ºæ–‡ä»¶

---

## F6ï¼šå½•éŸ³æ–‡ä»¶æœ¬åœ°å¤‡ä»½

- åœ¨"è¯­éŸ³"è®¾ç½® Tab ä¸­è®¾ç½®æœ¬åœ°å¤‡ä»½ç›®å½•ï¼ˆé»˜è®¤å…³é—­ï¼‰
- å½•éŸ³ç»“æŸåè‡ªåŠ¨ä¿å­˜å®Œæ•´å½•éŸ³ä¸º `recording-{YYYY-MM-DD-HHmmss}.wav`
- æ–‡ä»¶ä¿å­˜è‡³ç”¨æˆ·æŒ‡å®šç›®å½•

---

## Settings æ‰©å±•ï¼ˆ`src/lib/stores/settings-store.ts`ï¼‰

```typescript
// Settings æ¥å£æ–°å¢å­—æ®µ
speechProviderConfigs: SpeechProviderConfig[];
activeSpeechConfigId: string | null;
voiceProfiles: VoiceProfile[];
recordingBackupDir: string | null;   // null = ä¸å¤‡ä»½
voiceSyncDir: string | null;         // null = ä½¿ç”¨ AppData é»˜è®¤è·¯å¾„

// è¿ç§»é»˜è®¤å€¼
speechProviderConfigs: [],
activeSpeechConfigId: null,
voiceProfiles: [],
recordingBackupDir: null,
voiceSyncDir: null,
```

---

## éœ€ä¿®æ”¹çš„æ–‡ä»¶æ¸…å•

### å‰ç«¯

| æ–‡ä»¶ | æ”¹åŠ¨ |
|------|------|
| `src/lib/services/ai/types.ts` | æ–°å¢ SpeechProvider / SpeechProviderConfig / SPEECH_PROVIDER_MODELS / SPEECH_PROVIDER_BASE_URLS |
| `src/lib/services/voice/types.ts` | **æ–°å»º**ï¼šVoiceProfile / TranscriptSegment |
| `src/lib/services/voice/speech-service.ts` | **æ–°å»º**ï¼šå½•éŸ³é‡‡é›†ã€Rust IPC è°ƒç”¨ã€åŸºé¢‘åˆ†æã€å£°çº¹åŒ¹é… |
| `src/lib/services/voice/index.ts` | **æ–°å»º**ï¼šæ¨¡å—å¯¼å‡º |
| `src/lib/stores/settings-store.ts` | æ–°å¢ speech/voice å­—æ®µ + è¿ç§» |
| `src/lib/components/SettingsPanel.svelte` | æ–°å¢"è¯­éŸ³" Tab |
| `src/lib/components/VoiceSettings.svelte` | **æ–°å»º**ï¼šè¯­éŸ³è®¾ç½®ï¼ˆProvider é…ç½® + å£°çº¹æ¡£æ¡ˆç®¡ç†ï¼‰|
| `src/lib/components/TranscriptionPanel.svelte` | **æ–°å»º**ï¼šå®æ—¶è½¬å½•é¢æ¿ |
| `src/lib/components/ai/AIChatPanel.svelte` | æ–°å¢ "+" æŒ‰é’® + åŠŸèƒ½æŠ½å±‰èœå• + è½¬å½•è§†å›¾åˆ‡æ¢ |
| `src/lib/i18n/locales/en.json` | æ–°å¢ `voice` / `transcription` ç¿»è¯‘é”® |
| `src/lib/i18n/locales/zh-CN.json` | åŒä¸Šï¼ˆä¸­æ–‡ï¼‰|

### Rust åç«¯

| æ–‡ä»¶ | æ”¹åŠ¨ |
|------|------|
| `src-tauri/src/commands/speech_proxy.rs` | **æ–°å»º**ï¼šWebSocket ä»£ç†ï¼ˆæ¡æ‰‹ã€éŸ³é¢‘è½¬å‘ã€äº‹ä»¶å›è°ƒã€æ–­çº¿é‡è¿ï¼‰|
| `src-tauri/src/commands/mod.rs` | `pub mod speech_proxy` |
| `src-tauri/src/lib.rs` | æ³¨å†Œ speech_proxy å‘½ä»¤ |
| `src-tauri/Cargo.toml` | æ–°å¢ `tokio-tungstenite = { version = "0.24", features = ["native-tls"] }` |
| `src-tauri/tauri.conf.json` | macOS æ–°å¢ `NSMicrophoneUsageDescription` |

### æ–‡æ¡£ & ç‰ˆæœ¬

| æ–‡ä»¶ | æ”¹åŠ¨ |
|------|------|
| `docs/iterations/v0.15.0-voice-transcription.md` | æœ¬æ–‡æ¡£ |
| `README.md` | Development Roadmap æ–°å¢æ‘˜è¦è¡Œ |
| `package.json` + `src-tauri/Cargo.toml` + `src-tauri/tauri.conf.json` | ç‰ˆæœ¬å‡è‡³ 0.15.0 |

---

## å®æ–½é¡ºåº

1. åˆ›å»ºæœ¬è¿­ä»£æ–‡æ¡£
2. **ç‰ˆæœ¬å‡çº§** â€” `pnpm version:bump 0.15.0`
3. **F1** â€” ç±»å‹æ‰©å±• + Settings å­—æ®µ + è¯­éŸ³ Tab + VoiceSettings Provider é…ç½® UI
4. **F2** â€” Rust `speech_proxy.rs` WebSocket ä»£ç†æ ¸å¿ƒ
5. **F5** â€” AIChatPanel "+" æŒ‰é’®æŠ½å±‰ + TranscriptionPanel UI éª¨æ¶
6. **F2+F5 è”è°ƒ** â€” ç«¯åˆ°ç«¯è½¬å½•æµ‹è¯•ï¼ˆDeepgram è¿æ¥ â†’ å®æ—¶æ˜¾ç¤ºï¼‰
7. **F3** â€” åŸºé¢‘åˆ†æè¯´è¯äººå‘½å + MFCC å£°çº¹ç‰¹å¾æå–
8. **F4** â€” VoiceSettings å£°çº¹æ¡£æ¡ˆç®¡ç† UI + å­˜å‚¨/åŒæ­¥/å¯¼å‡ºå¯¼å…¥
9. **F6** â€” å½•éŸ³æ–‡ä»¶å¤‡ä»½
10. **i18n** â€” è¡¥å…¨ en.json + zh-CN.json
11. **README** æ›´æ–°

---

## å·²çŸ¥é™åˆ¶

### å•éº¦å…‹é£å¤šäººè¯´è¯äººè¯†åˆ«çº¦æŸ

**ç°è±¡ï¼š** åœ¨ä½¿ç”¨ç¬”è®°æœ¬å†…ç½®éº¦å…‹é£ï¼ˆæˆ–å•ä¸ªå¤–ç½®éº¦å…‹é£ï¼‰å½•åˆ¶å¤šäººå¯¹è¯æ—¶ï¼ŒDeepgram æµå¼ diarization å¯èƒ½å°†æ‰€æœ‰è¯´è¯äººè¯†åˆ«ä¸ºåŒä¸€äººï¼ˆå¦‚"è·¯äºº872"ï¼‰ï¼Œæ— æ³•åŒºåˆ†ä¸åŒè¯´è¯äººã€‚

**æ ¹æœ¬åŸå› ï¼š** è¿™æ˜¯ä¿¡å·å¤„ç†å±‚é¢çš„ç¡¬ä»¶é™åˆ¶ï¼Œä¸ä»£ç å®ç°æ— å…³ï¼š

- å•ä¸ªéº¦å…‹é£é‡‡é›†çš„éŸ³é¢‘æ˜¯æ‰€æœ‰è¯´è¯äººå£°éŸ³çš„**æ··åˆä¿¡å·**ï¼ˆå•å£°é“æ··éŸ³ï¼‰
- Deepgram æµå¼ diarization ä¾èµ–å¯¹ä¸åŒå£°æºçš„å£°å­¦ç‰¹å¾è¿›è¡ŒåŒºåˆ†ï¼Œä½†æ··åˆåçš„å•å£°é“ä¿¡å·ç¼ºä¹è¶³å¤Ÿçš„ç©ºé—´/é¢‘è°±åˆ†ç¦»åº¦
- å½“ä¸¤äººè·ç¦»éº¦å…‹é£è·ç¦»ç›¸è¿‘ã€éŸ³é‡ç›¸å½“æ—¶ï¼Œæ¨¡å‹æ— æ³•å¯é åœ°å°†éŸ³é¢‘å¸§å½’å±åˆ°ä¸åŒè¯´è¯äºº

**å¯¹æ¯”ï¼š** Deepgram æ‰¹å¤„ç†æ¨¡å¼ï¼ˆä¸Šä¼ å®Œæ•´å½•éŸ³æ–‡ä»¶ï¼‰å¯¹å•éº¦å…‹é£å¤šäººè¯†åˆ«çš„å‡†ç¡®ç‡ç•¥ä¼˜äºæµå¼ï¼Œä½†ä»å—é™äºè¾“å…¥ä¿¡å·è´¨é‡ã€‚

**è§£å†³å»ºè®®ï¼ˆç”¨æˆ·ç«¯ï¼‰ï¼š**

| åœºæ™¯ | æ¨èæ–¹æ¡ˆ |
|------|---------|
| 2äººé¢å¯¹é¢å¯¹è¯ | æ¯äººä½©æˆ´ä¸€ä¸ªæœ‰çº¿/æ— çº¿è€³æœºéº¦å…‹é£ï¼Œåˆ†åˆ«æ¥å…¥æ··éŸ³å™¨åå†é‡‡é›† |
| å°å‹ä¼šè®®ï¼ˆâ‰¤4äººï¼‰ | ä½¿ç”¨å¤šéº¦å…‹é£ä¼šè®®è®¾å¤‡ï¼ˆå¦‚ Jabra Speakã€Poly Studioï¼‰åšç¡¬ä»¶çº§å£°æºåˆ†ç¦» |
| è®¿è°ˆå½•åˆ¶ | ä¸¤ä¸ªç‹¬ç«‹å½•éŸ³è®¾å¤‡åˆ†åˆ«æ”¾ç½®åœ¨å—è®¿è€…å’Œé‡‡è®¿è€…é¢å‰ï¼Œäº‹ååˆå¹¶è½¬å½• |
| å•äººåœºæ™¯ | å•éº¦å…‹é£å®Œå…¨å¤Ÿç”¨ï¼Œè¯´è¯äººè¯†åˆ«å‡†ç¡®ç‡æ¥è¿‘ 100% |

**æŠ€æœ¯è¾¹ç•Œå£°æ˜ï¼š** è¯´è¯äººåˆ†ç¦»ï¼ˆSpeaker Diarizationï¼‰åœ¨å•éº¦å…‹é£æ··åˆä¿¡å·ä¸Šçš„é™åˆ¶ï¼Œå±äºä¿¡å·å¤„ç†é¢†åŸŸçš„ **ç›²æºåˆ†ç¦»ï¼ˆBSS, Blind Source Separationï¼‰** é—®é¢˜ã€‚äº‘ç«¯ STT æœåŠ¡ä¸æä¾›ç¡¬ä»¶çº§å£°æºåˆ†ç¦»èƒ½åŠ›ï¼Œä¸“ä¸šçº§å¤šå£°é“åˆ†ç¦»éœ€è¦éº¦å…‹é£é˜µåˆ—ï¼ˆå¦‚ Microsoft Azure çš„ Conversation Transcription æœåŠ¡éœ€é…åˆ 7 éº¦é˜µåˆ—è®¾å¤‡ï¼‰ã€‚

---

## éªŒè¯æ–¹æ¡ˆ

| åŠŸèƒ½ | éªŒè¯æ­¥éª¤ |
|------|---------|
| F1 Provider é…ç½® | è®¾ç½® â†’ è¯­éŸ³ â†’ æ·»åŠ  Deepgram é…ç½®ï¼Œè¾“å…¥ API Keyï¼Œç‚¹å‡»"æµ‹è¯•è¿æ¥"ï¼Œåº”æ˜¾ç¤ºæˆåŠŸ |
| F2 è½¬å½•æ ¸å¿ƒ | é…ç½®å®Œæˆåç‚¹å‡» "+" â†’ å½•éŸ³è½¬å½•ï¼Œå¯¹éº¦å…‹é£è¯´è¯ï¼Œç¡®è®¤æ–‡å­—åœ¨é¢æ¿å†…å®æ—¶é€å¥è¿½åŠ  |
| F3 è¯´è¯äººå‘½å | ä¸¤äººäº¤æ›¿è¯´è¯ï¼Œç¡®è®¤é¢œè‰²åŒºåˆ† + è‡ªåŠ¨å‘½åä¸º"ç”·1å·"/"å¥³1å·" |
| F4 å£°çº¹æ¡£æ¡ˆ | ä¼šè¯ç»“æŸåè¿›å…¥å£°çº¹æ¡£æ¡ˆï¼Œç¡®è®¤æ ·æœ¬å·²æå–ï¼Œä¿®æ”¹æ˜µç§°ï¼Œæµ‹è¯•å¯¼å‡º/å¯¼å…¥ ZIP |
| F5 è½¬å½• UI | è½¬å½•ç»“æŸåç‚¹å‡»"ç”Ÿæˆä¼šè®®æ‘˜è¦ â†’AI"ï¼Œç¡®è®¤æ–‡å­—å‘é€åˆ° LLM å¹¶ç”Ÿæˆæ‘˜è¦ |
| F5 ä¿å­˜æ–‡æ¡£ | ç‚¹å‡»"ä¿å­˜ä¸ºæ–‡æ¡£"ï¼Œç¡®è®¤ Markdown æ ¼å¼æ­£ç¡®æ’å…¥ç¼–è¾‘å™¨ |
| F6 å½•éŸ³å¤‡ä»½ | è®¾ç½®å¤‡ä»½ç›®å½•ï¼Œå½•éŸ³ç»“æŸåç¡®è®¤ç›®å½•å†…å‡ºç° WAV æ–‡ä»¶ |
| å®‰å…¨æ€§ | ç¡®è®¤ API Key ä¸å‡ºç°åœ¨ç£ç›˜æ–‡ä»¶ä¸­ï¼ˆåº”ä¸º `***`ï¼‰ï¼ŒAPI è°ƒç”¨èµ° Rust ä»£ç† |
| å•äººè¯´è¯äººè¯†åˆ« | å•äººå¯¹éº¦å…‹é£è¯´è¯ï¼Œç¡®è®¤è¯´è¯äººå‘½åæ­£ç¡®æ˜¾ç¤ºï¼ˆç”·Nå·/å¥³Nå·ï¼‰|
